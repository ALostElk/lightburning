# 快速测试指南

## 🚀 快速开始

### 1. 启动后端服务

```bash
cd lightburning-main
npm install
npm start
```

后端服务运行在 `http://localhost:3000`

### 2. 打开前端应用

打开浏览器，访问：
```
file:///path/to/frontend/index-new.html
```

或者使用 Live Server（推荐）：
- 在 VS Code 中右键 `frontend/index-new.html`
- 选择 "Open with Live Server"

## ✅ 任务 1.1 - 个人信息页面测试

### 测试步骤

1. **进入个人信息页面**
   - 点击导航栏中的 "👤 个人信息"
   - 或访问 `#profile`

2. **测试表单输入**
   - 填写昵称: "张三"
   - 年龄: 25
   - 性别: 男
   - 身高: 170 cm
   - 当前体重: 70 kg
   - 目标体重: 65 kg
   - 活动等级: 中等活动

3. **验证实时计算**
   - 右侧应显示：
     - BMI: 24.2
     - BMR: ~1724 kcal
     - TDEE: ~2671 kcal
     - 减重目标: 5.0 kg

4. **测试数据验证**
   - 尝试输入无效数据（年龄 10）
   - 应显示错误消息

5. **保存数据**
   - 点击"💾 保存个人信息"
   - 应显示成功消息
   - 数据应保存到本地存储和后端

### 预期结果
✅ 表单正常显示
✅ 实时计算准确
✅ 数据验证有效
✅ 保存成功

---

## ✅ 任务 1.2 - 计划生成页面测试

### 测试步骤

1. **先完成个人信息**
   - 如未完成，页面会显示警告

2. **进入计划生成页面**
   - 点击导航栏中的 "🎯 生成计划"
   - 或访问 `#plan/generate`

3. **调整计划参数**
   - 拖动周期滑块：12 周
   - 观察预览信息更新

4. **查看预览**
   - 当前体重: 70 kg
   - 目标体重: 65 kg
   - 每周减重: ~0.42 kg（绿色✓标记）
   - 每日热量目标: ~2200 kcal

5. **生成计划**
   - 点击"🚀 生成我的计划"
   - 等待加载
   - 应自动跳转到计划详情页

### 预期结果
✅ 基于个人信息显示数据
✅ 预览信息正确
✅ 健康性检查有效
✅ 计划生成成功且跳转

---

## ✅ 任务 1.3 - 计划详情页面测试

### 测试步骤

1. **进入计划详情页面**
   - 从生成计划页自动跳转
   - 或点击"📊 计划详情"
   - 或访问 `#plan/detail`

2. **查看计划概览**
   - 当前体重: 70 kg
   - 目标体重: 65 kg
   - 需要减重: 5.0 kg
   - 计划周期: 12 周

3. **查看进度条**
   - 时间进度（灰蓝色）
   - 减重进度（红色）

4. **查看每日目标**
   - 每日热量摄入: ~2200 kcal
   - 每日蛋白质: ~112 g
   - 每日碳水: ~275 g
   - 每日脂肪: ~73 g

5. **测试记录体重**
   - 点击"⛔ 记录体重"
   - 输入日期和新体重
   - 点击保存

6. **测试调整计划**
   - 点击"📝 调整计划"
   - 修改目标体重或周期
   - 点击确定

7. **测试终止计划**
   - 点击"⛔ 终止计划"
   - 确认操作
   - 应返回计划生成页

### 预期结果
✅ 计划概览正确显示
✅ 进度条正常工作
✅ 每日目标计算准确
✅ 记录体重功能工作
✅ 调整和终止功能可用

---

## 🧪 运行单元测试

### 在浏览器控制台运行

1. **打开浏览器控制台**
   - 按 F12 或右键 → 检查 → Console

2. **运行所有测试**
   ```javascript
   runAllTests();
   ```

3. **预期输出**
   ```
   测试 HealthValidator
   ✓ 应该接受有效的年龄
   ✓ 应该拒绝太年轻的年龄
   ...
   测试 HealthCalculator
   ✓ 应该正确计算 BMI
   ...
   测试结果: X 通过, 0 失败
   ```

---

## 🔍 调试技巧

### 查看本地存储数据

```javascript
// 查看用户 ID
console.log(localStorage.getItem('userId'));

// 查看个人信息
console.log(JSON.parse(localStorage.getItem('userProfile')));

// 查看当前计划
console.log(JSON.parse(localStorage.getItem('currentPlan')));
```

### 查看 API 调用

1. 打开开发者工具 (F12)
2. 选择 "Network" 选项卡
3. 刷新页面
4. 查看 API 请求和响应

### 清除所有数据

```javascript
localStorage.clear();
location.reload();
```

---

## 📊 测试用例

### 个人信息页面

| 测试项 | 输入 | 预期结果 |
|------|------|--------|
| 有效信息 | 所有字段填写正确 | 保存成功 |
| 年龄验证 | age: 10 | 显示错误 |
| 身高验证 | height: 50 | 显示错误 |
| 体重验证 | weight: 10 | 显示错误 |
| BMI 计算 | h:170, w:70 | BMI: 24.2 |
| 重置表单 | 点击重置按钮 | 恢复初始值 |

### 计划生成页面

| 测试项 | 操作 | 预期结果 |
|------|------|--------|
| 周期滑块 | 拖到 16 周 | 预览信息更新 |
| 健康检查 | 设置激进目标 | 显示警告 |
| 生成计划 | 点击生成 | 跳转到详情页 |
| 无信息警告 | 清除信息后打开 | 显示警告 |

### 计划详情页面

| 测试项 | 操作 | 预期结果 |
|------|------|--------|
| 概览显示 | 页面加载 | 显示正确数据 |
| 进度条 | 观察显示 | 进度正确 |
| 记录体重 | 输入数据并保存 | 数据保存成功 |
| 调整计划 | 修改参数并保存 | 计划更新 |
| 终止计划 | 点击终止 | 返回生成页 |

---

## 🐛 常见问题

### 问题 1: 后端无法连接

**症状**: API 调用失败，显示网络错误
**解决**:
1. 确认后端服务运行: `npm start`
2. 检查端口 3000 是否开放
3. 查看浏览器控制台错误信息

### 问题 2: 本地存储无法保存

**症状**: 刷新页面后数据消失
**解决**:
1. 检查浏览器是否启用了 LocalStorage
2. 检查浏览器隐私模式设置
3. 清除浏览器缓存并重试

### 问题 3: 页面样式不显示

**症状**: 页面显示为白色或样式混乱
**解决**:
1. 清除浏览器缓存 (Ctrl+Shift+Delete)
2. 刷新页面 (Ctrl+F5)
3. 检查样式文件路径是否正确

### 问题 4: 组件不显示

**症状**: 某些组件（按钮、输入框）不显示
**解决**:
1. 检查浏览器控制台是否有 JavaScript 错误
2. 确保导入了所有依赖的模块
3. 检查容器元素是否存在

---

## 📱 测试环境要求

### 浏览器
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

### 系统要求
- Node.js 14+
- npm 6+
- 至少 100MB 空闲磁盘空间

### 网络
- 稳定的网络连接
- 后端服务可访问

---

## ✨ 测试检查清单

- [ ] 后端服务运行正常
- [ ] 前端页面正常加载
- [ ] 个人信息页面能正常填写和保存
- [ ] 实时计算显示正确
- [ ] 计划生成页面能正常生成
- [ ] 计划详情页面能正常显示
- [ ] 所有单元测试通过
- [ ] 没有控制台错误
- [ ] 本地存储正常工作
- [ ] API 调用成功

---

## 📞 反馈和支持

如遇到问题，请：

1. **查看控制台日志** - 按 F12，查看 Console 选项卡
2. **查看 Network 选项卡** - 查看 API 调用是否成功
3. **检查本地存储** - 查看数据是否保存
4. **查阅项目文档** - 参考 `PROJECT_GUIDE.md`
5. **运行单元测试** - 执行 `runAllTests()`

---

**测试日期**: 2025-12-07
**版本**: 1.0.0
**测试人**: 团队成员
