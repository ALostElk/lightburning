# ğŸ—„ï¸ æ•°æ®åº“åˆå§‹åŒ–æŒ‡å—

> **é‡è¦æç¤ºï¼š** åœ¨ä½¿ç”¨å°ç¨‹åºä¹‹å‰ï¼Œå¿…é¡»å…ˆåœ¨äº‘å¼€å‘æ§åˆ¶å°åˆ›å»ºä»¥ä¸‹æ•°æ®åº“é›†åˆã€‚

## ğŸ“‹ å¿…éœ€çš„æ•°æ®åº“é›†åˆ

### 1. æ ¸å¿ƒä¸šåŠ¡é›†åˆï¼ˆå¿…é¡»åˆ›å»ºï¼‰

#### âœ… UserProfiles - ç”¨æˆ·èµ„æ–™è¡¨
```json
{
  "_openid": "ç”¨æˆ·å”¯ä¸€æ ‡è¯†",
  "gender": "male/female",
  "age": 25,
  "height": 170,
  "weight": 70,
  "goal": "å‡è„‚/å¢è‚Œ/ä¿æŒ",
  "targetWeight": 65,
  "activityLevel": 1.375,
  "bmr": 1650,
  "tdee": 2200,
  "bmi": 24.2,
  "createdAt": 1234567890,
  "updatedAt": 1234567890
}
```

#### âœ… DietLog - é¥®é£Ÿè®°å½•è¡¨
```json
{
  "_openid": "ç”¨æˆ·å”¯ä¸€æ ‡è¯†",
  "recordDate": "2024-12-10",
  "mealType": "breakfast/lunch/dinner/snack",
  "foodName": "é¸¡èƒ¸è‚‰",
  "calories": 165,
  "protein": 31,
  "carbs": 0,
  "fat": 3.6,
  "grams": 100,
  "createdAt": 1234567890
}
```

#### âœ… FoodDB - é£Ÿç‰©æ•°æ®åº“è¡¨
```json
{
  "name": "é¸¡èƒ¸è‚‰",
  "calories": 165,
  "protein": 31,
  "carbs": 0,
  "fat": 3.6,
  "unit": "g",
  "category": "è‚‰ç±»",
  "servingSize": "100g",
  "searchCount": 0,
  "createdAt": 1234567890
}
```

#### âœ… UserDishes - ç”¨æˆ·è‡ªå®šä¹‰èœå“è¡¨
```json
{
  "_openid": "ç”¨æˆ·å”¯ä¸€æ ‡è¯†",
  "name": "æˆ‘çš„ç‰¹åˆ¶æ²™æ‹‰",
  "calories": 350,
  "protein": 25,
  "carbs": 40,
  "fat": 8,
  "servingSize": "ä¸€ä»½",
  "gramsPerServing": 200,
  "imageUrl": "cloud://xxx",
  "createdAt": 1234567890
}
```

#### âœ… ExerciseLog - è¿åŠ¨è®°å½•è¡¨
```json
{
  "_openid": "ç”¨æˆ·å”¯ä¸€æ ‡è¯†",
  "name": "è·‘æ­¥",
  "duration": 30,
  "calories": 300,
  "date": "2024-12-10",
  "createdAt": 1234567890
}
```

#### âœ… health_plans - è®¡åˆ’è¡¨
```json
{
  "_openid": "ç”¨æˆ·å”¯ä¸€æ ‡è¯†",
  "targetWeightChange": -5,
  "totalDays": 60,
  "totalDeficit": -38500,
  "dailyDeficit": -642,
  "dailyCalorieGoal": 1558,
  "startDate": "2024-12-10",
  "createdAt": 1234567890
}
```

#### âœ… DailyEvaluations - æ¯æ—¥è¯„ä»·è¡¨
```json
{
  "_openid": "ç”¨æˆ·å”¯ä¸€æ ‡è¯†",
  "date": "2024-12-10",
  "tdee": 2200,
  "dietCalories": 1800,
  "exerciseCalories": 300,
  "actualDeficit": -700,
  "targetDeficit": -642,
  "trafficLight": {
    "color": "#51CF66",
    "status": "green",
    "description": "çƒ­é‡å·®å®Œç¾ï¼Œç»§ç»­ä¿æŒï¼"
  },
  "nutrition": {
    "protein": 120,
    "carbs": 180,
    "fat": 50
  },
  "nutritionScore": 85,
  "suggestions": ["ä¿æŒç°çŠ¶", "å¤šå–æ°´"],
  "createdAt": 1234567890
}
```

### 2. å¯é€‰é›†åˆ

#### UnitMap - å•ä½æ˜ å°„è¡¨ï¼ˆå¯é€‰ï¼‰
```json
{
  "name": "ç‰›å¥¶",
  "unit": "ml",
  "gramsPerUnit": 1.03,
  "commonUnits": ["ml", "æ¯", "ç›’"]
}
```

---

## ğŸš€ å¿«é€Ÿåˆå§‹åŒ–æ­¥éª¤

### æ–¹æ³•ä¸€ï¼šæ‰‹åŠ¨åˆ›å»ºï¼ˆæ¨èç”¨äºç”Ÿäº§ç¯å¢ƒï¼‰

1. **æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·**
2. **ç‚¹å‡»"äº‘å¼€å‘"æŒ‰é’®**ï¼ˆå·¥å…·æ å³ä¸Šè§’ï¼‰
3. **è¿›å…¥"æ•°æ®åº“"æ ‡ç­¾**
4. **ä¾æ¬¡åˆ›å»ºä»¥ä¸‹é›†åˆï¼ˆç‚¹å‡» + å·ï¼‰ï¼š**
   - âœ… `UserProfiles`
   - âœ… `DietLog`
   - âœ… `FoodDB`
   - âœ… `UserDishes`
   - âœ… `ExerciseLog`
   - âœ… `health_plans`
   - âœ… `DailyEvaluations`

5. **è®¾ç½®æƒé™**ï¼ˆé‡è¦ï¼ï¼‰

   å¯¹äºæ¯ä¸ªé›†åˆï¼Œç‚¹å‡»"æƒé™è®¾ç½®"ï¼š
   
   ```javascript
   // æ‰€æœ‰é›†åˆæ¨èæƒé™è®¾ç½®
   {
     "read": true,    // å…è®¸æ‰€æœ‰äººè¯»å–
     "write": false   // ä»…åˆ›å»ºè€…å¯å†™
   }
   ```

### æ–¹æ³•äºŒï¼šä½¿ç”¨äº‘å¼€å‘æ§åˆ¶å°æ‰¹é‡åˆ›å»º

1. ç™»å½• [è…¾è®¯äº‘å¼€å‘æ§åˆ¶å°](https://console.cloud.tencent.com/tcb)
2. é€‰æ‹©ä½ çš„ç¯å¢ƒ
3. è¿›å…¥"æ•°æ®åº“" â†’ "é›†åˆç®¡ç†"
4. æ‰¹é‡åˆ›å»ºä¸Šè¿°é›†åˆ

---

## ğŸ“Š åˆå§‹åŒ–ç¤ºä¾‹æ•°æ®ï¼ˆå¯é€‰ï¼‰

### ä¸º FoodDB æ·»åŠ å¸¸ç”¨é£Ÿç‰©

åœ¨äº‘å¼€å‘æ§åˆ¶å° â†’ æ•°æ®åº“ â†’ FoodDB ä¸­ï¼Œå¯ä»¥æ‰‹åŠ¨æ·»åŠ æˆ–å¯¼å…¥ä»¥ä¸‹ç¤ºä¾‹æ•°æ®ï¼š

```json
[
  {
    "name": "ç±³é¥­",
    "calories": 116,
    "protein": 2.6,
    "carbs": 25.9,
    "fat": 0.3,
    "unit": "g",
    "category": "ä¸»é£Ÿ",
    "servingSize": "100g"
  },
  {
    "name": "é¸¡èƒ¸è‚‰",
    "calories": 165,
    "protein": 31,
    "carbs": 0,
    "fat": 3.6,
    "unit": "g",
    "category": "è‚‰ç±»",
    "servingSize": "100g"
  },
  {
    "name": "é¸¡è›‹",
    "calories": 147,
    "protein": 13,
    "carbs": 1.3,
    "fat": 9.5,
    "unit": "ä¸ª",
    "category": "è›‹ç±»",
    "servingSize": "1ä¸ª(çº¦50g)"
  },
  {
    "name": "è¥¿å…°èŠ±",
    "calories": 36,
    "protein": 4.1,
    "carbs": 6.6,
    "fat": 0.6,
    "unit": "g",
    "category": "è”¬èœ",
    "servingSize": "100g"
  },
  {
    "name": "ç‰›å¥¶",
    "calories": 54,
    "protein": 3,
    "carbs": 3.4,
    "fat": 3.2,
    "unit": "ml",
    "category": "é¥®å“",
    "servingSize": "100ml"
  }
]
```

---

## âœ… éªŒè¯æ•°æ®åº“æ˜¯å¦åˆ›å»ºæˆåŠŸ

1. **åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­æ‰“å¼€"äº‘å¼€å‘æ§åˆ¶å°"**
2. **è¿›å…¥"æ•°æ®åº“"æ ‡ç­¾**
3. **ç¡®è®¤ä»¥ä¸‹7ä¸ªé›†åˆéƒ½å·²åˆ›å»ºï¼š**
   - âœ… UserProfiles
   - âœ… DietLog
   - âœ… FoodDB
   - âœ… UserDishes
   - âœ… ExerciseLog
   - âœ… health_plans
   - âœ… DailyEvaluations

4. **æµ‹è¯•å°ç¨‹åº**
   - æ‰“å¼€å°ç¨‹åº
   - è¿›å…¥"ä¸ªäººä¿¡æ¯"é¡µé¢ï¼Œå¡«å†™åŸºæœ¬ä¿¡æ¯
   - å°è¯•æ·»åŠ é¥®é£Ÿè®°å½•
   - æŸ¥çœ‹é¦–é¡µæ•°æ®æ˜¯å¦æ­£å¸¸æ˜¾ç¤º

---

## ğŸ”§ æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–ï¼ˆå¯é€‰ï¼Œæå‡æ€§èƒ½ï¼‰

ä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µæ·»åŠ ç´¢å¼•ï¼š

### DietLog é›†åˆ
- ç´¢å¼•å­—æ®µï¼š`_openid` + `recordDate`ï¼ˆå¤åˆç´¢å¼•ï¼‰
- ç´¢å¼•ç±»å‹ï¼šå‡åº

### ExerciseLog é›†åˆ
- ç´¢å¼•å­—æ®µï¼š`_openid` + `date`ï¼ˆå¤åˆç´¢å¼•ï¼‰
- ç´¢å¼•ç±»å‹ï¼šå‡åº

### FoodDB é›†åˆ
- ç´¢å¼•å­—æ®µï¼š`name`
- ç´¢å¼•ç±»å‹ï¼šæ–‡æœ¬ç´¢å¼•ï¼ˆç”¨äºæœç´¢ï¼‰

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: åˆ›å»ºé›†åˆåä»ç„¶æŠ¥é”™ï¼Ÿ
**A:** æ¸…é™¤å°ç¨‹åºç¼“å­˜åé‡æ–°ç¼–è¯‘ï¼š
- å¾®ä¿¡å¼€å‘è€…å·¥å…· â†’ å·¥å…· â†’ æ¸…é™¤ç¼“å­˜ â†’ å…¨éƒ¨æ¸…é™¤
- é‡æ–°ç¼–è¯‘å°ç¨‹åº

### Q2: æƒé™æŠ¥é”™ -502006ï¼Ÿ
**A:** æ£€æŸ¥é›†åˆæƒé™è®¾ç½®ï¼š
- è¿›å…¥æ•°æ®åº“æ§åˆ¶å°
- ç‚¹å‡»é›†åˆåç§° â†’ æƒé™è®¾ç½®
- è®¾ç½® `read: true, write: false`

### Q3: å¦‚ä½•æ‰¹é‡å¯¼å…¥é£Ÿç‰©æ•°æ®ï¼Ÿ
**A:** 
1. å‡†å¤‡ JSON æ ¼å¼æ•°æ®æ–‡ä»¶
2. äº‘å¼€å‘æ§åˆ¶å° â†’ æ•°æ®åº“ â†’ FoodDB
3. ç‚¹å‡»"å¯¼å…¥" â†’ é€‰æ‹© JSON æ–‡ä»¶
4. ç¡®è®¤å¯¼å…¥

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°æ•°æ®åº“ç›¸å…³é—®é¢˜ï¼š
1. æŸ¥çœ‹å¾®ä¿¡å¼€å‘è€…å·¥å…·æ§åˆ¶å°çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯
2. è®¿é—® [äº‘å¼€å‘æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/getting-started.html)
3. è”ç³»è…¾è®¯äº‘å®¢æœ

---

## ğŸ‰ åˆå§‹åŒ–å®Œæˆï¼

å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œä½ çš„å°ç¨‹åºæ•°æ®åº“å°±é…ç½®å¥½äº†ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨æ‰€æœ‰åŠŸèƒ½ï¼








