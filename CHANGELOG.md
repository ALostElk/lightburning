# 版本说明

## v2.0.0 - AI增强版 (2025-11-30)

### 🎉 重大更新

#### 集成通义千问AI
- 引入阿里云通义千问(Qwen-turbo)模型
- 提供专业的AI营养分析服务
- 智能生成个性化饮食建议
- 为推荐食谱生成AI推荐理由

#### 云函数架构
- 创建 `qwenAI` 云函数代理AI API调用
- 保护API Key安全不暴露在小程序端
- 支持云函数和直接调用两种模式

#### 推荐引擎升级
- 集成AI分析功能
- 支持异步AI调用
- 实现自动降级策略（AI失败时使用规则推荐）
- 更智能的评分系统

#### 界面优化
- AI推荐页面显示AI生成的推荐理由
- 优化加载提示文案
- 增强错误处理和提示

### 📦 新增文件

```
miniprogram/utils/qwenService.js    # 通义千问AI服务封装
cloudfunctions/qwenAI/              # 云函数（代理AI调用）
├── index.js
├── package.json
└── config.json
```

### 🔧 技术改进

- 分层架构，AI服务层独立封装
- 完善的错误处理和降级策略
- 异步调用不阻塞UI
- 降低API调用成本

### ⚠️ 注意事项

1. AI功能需配置通义千问API Key
2. 推荐使用云函数方案保护API Key
3. 未配置AI时自动降级到规则推荐
4. AI调用会产生少量费用（约¥0.001/次）

---

## v1.0.0 - 基础版 (2025-11-29)

### 首次发布

#### 核心功能

**三种推荐模式**：
- 基于目标的食谱推荐（减脂/保持体重）
- 基于偏好的食谱推荐（匹配口味和习惯）
- 智能推荐系统（规则式营养分析）

**食谱详情**：
- 完整食材清单和营养成分
- 详细烹饪步骤
- 收藏、分享、保存功能

**推荐算法**：
- 智能评分系统（目标+偏好+营养缺口）
- 营养缺口分析
- 规则式建议生成

#### 数据设计

- 12道精选食谱（涵盖高蛋白、低卡、素食等）
- 模拟数据生成（7天饮食记录）
- 本地存储管理

#### 界面设计

- 现代化渐变色UI
- 卡片式布局
- emoji友好图标
- 进度条可视化

#### 技术实现

- 微信小程序原生开发
- JavaScript ES6+
- 模块化架构
- 本地数据存储

---

## 升级建议

从 v1.0.0 升级到 v2.0.0：

1. **更新代码**：拉取最新代码
2. **配置云开发**：开通微信云开发环境
3. **部署云函数**：上传 `cloudfunctions/qwenAI`
4. **配置API Key**：在云开发控制台设置环境变量
5. **初始化云开发**：在 `app.js` 中配置云环境ID

**不升级也可继续使用 v1.0.0 的规则推荐功能。**

---

## 后续规划

### v2.1.0（计划中）
- [ ] AI调用缓存机制
- [ ] 优化提示词效果
- [ ] 增加更多食谱数据
- [ ] 用户反馈收集

### v3.0.0（未来）
- [ ] AI对话问答
- [ ] 智能饮食计划
- [ ] 食物识别增强
- [ ] 社区分享功能

---

**感谢使用轻燃！** 🎉
