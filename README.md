# è½»ç‡ƒ LightBurning

<div align="center">

**æ™ºèƒ½å¥åº·ç®¡ç†å°ç¨‹åº**

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![WeChat MiniProgram](https://img.shields.io/badge/WeChat-MiniProgram-brightgreen)](https://developers.weixin.qq.com/miniprogram/dev/framework/)
[![Node.js](https://img.shields.io/badge/Node.js-18.15-green)](https://nodejs.org/)

*åŸºäºå¾®ä¿¡å°ç¨‹åºäº‘å¼€å‘çš„æ™ºèƒ½å¥åº·ç®¡ç†ç³»ç»Ÿ*

é›†æˆ AI é£Ÿç‰©è¯†åˆ« | ä¸ªæ€§åŒ–è®¡åˆ’ç”Ÿæˆ | è¥å…»åˆ†æ | è¿åŠ¨æ¨è

</div>

---

## ğŸ“– ç›®å½•

- [é¡¹ç›®ç®€ä»‹](#-é¡¹ç›®ç®€ä»‹)
- [æ ¸å¿ƒåŠŸèƒ½](#-æ ¸å¿ƒåŠŸèƒ½)
- [æŠ€æœ¯æ¶æ„](#-æŠ€æœ¯æ¶æ„)
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—)
- [å¼€å‘æ–‡æ¡£](#-å¼€å‘æ–‡æ¡£)
- [é¡¹ç›®ç»“æ„](#-é¡¹ç›®ç»“æ„)

---

## ğŸ¯ é¡¹ç›®ç®€ä»‹

**è½»ç‡ƒï¼ˆLightBurningï¼‰** æ˜¯ä¸€ä¸ªåŸºäºå¾®ä¿¡å°ç¨‹åºäº‘å¼€å‘çš„æ™ºèƒ½å¥åº·ç®¡ç†ç³»ç»Ÿï¼Œé€šè¿‡ AI æŠ€æœ¯å¸®åŠ©ç”¨æˆ·ç§‘å­¦ç®¡ç†é¥®é£Ÿã€è¿åŠ¨å’Œä½“é‡ã€‚

### âœ¨ ç‰¹è‰²äº®ç‚¹

- ğŸ¤– **AI æ‹ç…§è¯†é£Ÿ**ï¼šåŸºäºé€šä¹‰åƒé—®è§†è§‰æ¨¡å‹ï¼Œä¸€æ‹å³è¯†
- ğŸ” **ä¸‰å±‚é£Ÿç‰©æœç´¢**ï¼šæœ¬åœ°æ•°æ®åº“ + AI ä¼°ç®— + Open Food Facts API
- ğŸ“Š **æ™ºèƒ½è¥å…»åˆ†æ**ï¼šè‡ªåŠ¨è®¡ç®— BMR/TDEEï¼Œç”Ÿæˆä¸ªæ€§åŒ–è®¡åˆ’
- ğŸ¯ **çº¢ç»¿ç¯ç³»ç»Ÿ**ï¼šç›´è§‚å±•ç¤ºæ¯æ—¥çƒ­é‡å·®å’Œè¥å…»çŠ¶å†µ
- ğŸ’ª **è¿åŠ¨æ¨è**ï¼šæ ¹æ®ç›®æ ‡æ™ºèƒ½æ¨èè¿åŠ¨æ–¹æ¡ˆ

### ğŸš€ æœ€æ–°æ›´æ–°

> âš ï¸ **v2.0.1 ç‰ˆæœ¬**ï¼ˆ2025-12-13ï¼‰
> - ğŸ”§ ä¿®å¤äº‘å‡½æ•°è¶…æ—¶é—®é¢˜ï¼ˆå¢åŠ è‡³20ç§’ï¼‰
> - âš¡ ä¼˜åŒ–AIå“åº”é€Ÿåº¦ï¼ˆç®€åŒ–æç¤ºè¯ï¼‰
> - ğŸ¨ æ”¹è¿›å‰ç«¯åŠ è½½ä½“éªŒï¼ˆåˆ†æ­¥åŠ è½½ï¼‰
> - ğŸ›¡ï¸ å¢å¼ºé”™è¯¯å¤„ç†å’Œè‡ªåŠ¨é™çº§æœºåˆ¶
> - ğŸ“š è¯¦è§ [äº‘å‡½æ•°è¶…æ—¶ä¿®å¤è¯´æ˜.md](äº‘å‡½æ•°è¶…æ—¶ä¿®å¤è¯´æ˜.md)

> âš ï¸ **v2.0 ç‰ˆæœ¬**ï¼ˆ2025-12-09ï¼‰
> - âœ… å®Œæˆå‰ç«¯æ¶æ„é‡æ„ï¼Œæ¨¡å—åŒ–è®¾è®¡
> - âœ… ç»Ÿä¸€äº‘å‡½æ•°è°ƒç”¨æ¥å£ï¼ˆ`cloudApi.js`ï¼‰
> - âœ… ç§»é™¤å‰ç«¯ API Key æš´éœ²é£é™©
> - âœ… ä¼˜åŒ–é£Ÿç‰©æœç´¢ç®—æ³•ï¼Œæ”¯æŒå¸¸ç”¨é£Ÿç‰©æ™ºèƒ½ç½®é¡¶
> - ğŸ“š è¯¦è§ [æ¥å£æ•´åˆæ–‡æ¡£.md](æ¥å£æ•´åˆæ–‡æ¡£.md)

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
lightburning/
â”œâ”€â”€ ğŸ“ cloudfunctions/           # äº‘å‡½æ•°ï¼ˆåç«¯æœåŠ¡ï¼‰
â”‚   â”œâ”€â”€ healthService/           # å¥åº·ç®¡ç†æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ index.js            # ç”¨æˆ·ä¿¡æ¯ã€è®¡åˆ’ã€è¯„ä»·ã€è¿åŠ¨
â”‚   â”‚   â”œâ”€â”€ package.json        # ä¾èµ–ï¼šwx-server-sdk
â”‚   â”‚   â””â”€â”€ config.json         # è¿è¡Œé…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ dietService/            # é¥®é£Ÿç®¡ç†æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ index.js           # é£Ÿç‰©æœç´¢ã€è¯†åˆ«ã€è®°å½•
â”‚   â”‚   â”œâ”€â”€ package.json       # ä¾èµ–ï¼šwx-server-sdk, axios
â”‚   â”‚   â””â”€â”€ config.json        # è¿è¡Œé…ç½®ï¼ˆè¶…æ—¶120sï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ qwenAI/                # AI å»ºè®®ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ index.js          # è¥å…»åˆ†æã€å»ºè®®ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ package.json      # ä¾èµ–ï¼šwx-server-sdk
â”‚   â”‚   â””â”€â”€ config.json       # è¿è¡Œé…ç½®
â”‚   â”‚
â”‚   â””â”€â”€ foodRecognitionQwen/   # é£Ÿç‰©å›¾ç‰‡è¯†åˆ«
â”‚       â”œâ”€â”€ index.js          # é€šä¹‰åƒé—®è§†è§‰æ¨¡å‹è°ƒç”¨
â”‚       â”œâ”€â”€ package.json      # ä¾èµ–ï¼šwx-server-sdk, openai
â”‚       â””â”€â”€ config.json       # è¿è¡Œé…ç½®
â”‚
â”œâ”€â”€ ğŸ“ miniprogram/              # å°ç¨‹åºå‰ç«¯
â”‚   â”œâ”€â”€ ğŸ“ pages/               # é¡µé¢æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ home/              # ğŸ  é¦–é¡µï¼ˆæ•°æ®æ¦‚è§ˆï¼‰
â”‚   â”‚   â”œâ”€â”€ profile/           # ğŸ‘¤ ä¸ªäººä¿¡æ¯è®¾ç½®
â”‚   â”‚   â”œâ”€â”€ plan/              # ğŸ“‹ è®¡åˆ’ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ generate/     # ç”Ÿæˆæ–°è®¡åˆ’
â”‚   â”‚   â”‚   â””â”€â”€ detail/       # è®¡åˆ’è¯¦æƒ…
â”‚   â”‚   â”œâ”€â”€ diet/              # ğŸ½ï¸ é¥®é£Ÿç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ index/        # é¥®é£Ÿè®°å½•é¦–é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ camera/       # æ‹ç…§è¯†åˆ«
â”‚   â”‚   â”‚   â”œâ”€â”€ search/       # æœç´¢é£Ÿç‰©
â”‚   â”‚   â”‚   â”œâ”€â”€ manual/       # æ‰‹åŠ¨è¾“å…¥
â”‚   â”‚   â”‚   â”œâ”€â”€ custom-dishes/ # è‡ªå®šä¹‰èœå“
â”‚   â”‚   â”‚   â””â”€â”€ favorites/    # å¸¸ç”¨é£Ÿç‰©
â”‚   â”‚   â”œâ”€â”€ exercise/          # ğŸ’ª è¿åŠ¨ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ index/        # è¿åŠ¨è®°å½•
â”‚   â”‚   â”‚   â””â”€â”€ recommend/    # è¿åŠ¨æ¨è
â”‚   â”‚   â”œâ”€â”€ report/            # ğŸ“Š æ¯æ—¥è¯„ä»·
â”‚   â”‚   â”‚   â””â”€â”€ daily/        # æ¯æ—¥æŠ¥å‘Š
â”‚   â”‚   â”œâ”€â”€ stats/             # ğŸ“ˆ æ•°æ®ç»Ÿè®¡
â”‚   â”‚   â”‚   â””â”€â”€ index/        # ç»Ÿè®¡å›¾è¡¨
â”‚   â”‚   â”œâ”€â”€ recipe-recommend/  # ğŸ¥— é£Ÿè°±æ¨è
â”‚   â”‚   â”œâ”€â”€ recipe-detail/     # é£Ÿè°±è¯¦æƒ…
â”‚   â”‚   â”œâ”€â”€ ai-suggestion/     # ğŸ¤– AI å»ºè®®
â”‚   â”‚   â””â”€â”€ mine/              # ğŸ‘¥ ä¸ªäººä¸­å¿ƒ
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ utils/               # å·¥å…·æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ cloudApi.js        # â­ äº‘å‡½æ•°ç»Ÿä¸€è°ƒç”¨ï¼ˆæ ¸å¿ƒï¼‰
â”‚   â”‚   â”œâ”€â”€ calculator.js      # å¥åº·è®¡ç®—å·¥å…·ï¼ˆBMR/TDEE/BMIï¼‰
â”‚   â”‚   â”œâ”€â”€ recipeEngine.js    # é£Ÿè°±æ¨èå¼•æ“
â”‚   â”‚   â”œâ”€â”€ recipeData.js      # é£Ÿè°±æ•°æ®
â”‚   â”‚   â””â”€â”€ README.md          # å·¥å…·å‡½æ•°ä½¿ç”¨æ–‡æ¡£
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ components/          # è‡ªå®šä¹‰ç»„ä»¶
â”‚   â”‚   â””â”€â”€ cloudTipModal/     # äº‘å¼€å‘æç¤ºç»„ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ images/              # å›¾ç‰‡èµ„æº
â”‚   â”‚   â””â”€â”€ icons/             # å›¾æ ‡èµ„æº
â”‚   â”‚
â”‚   â”œâ”€â”€ app.js                 # å°ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ app.json               # å…¨å±€é…ç½®
â”‚   â””â”€â”€ app.wxss               # å…¨å±€æ ·å¼
â”‚
â”œâ”€â”€ ğŸ“„ æ¥å£æ•´åˆæ–‡æ¡£.md            # â­ API æ¥å£å®Œæ•´æ–‡æ¡£ï¼ˆå¿…è¯»ï¼‰
â”œâ”€â”€ ğŸ“„ exercise_db.json         # è¿åŠ¨æ•°æ®åº“
â”œâ”€â”€ ğŸ“„ api.env                  # ç¯å¢ƒå˜é‡é…ç½®
â”œâ”€â”€ ğŸ“„ package.json             # é¡¹ç›®ä¾èµ–
â””â”€â”€ ğŸ“„ project.config.json      # å¾®ä¿¡å¼€å‘è€…å·¥å…·é…ç½®
```

## ğŸ¨ æ ¸å¿ƒåŠŸèƒ½

### 1ï¸âƒ£ ç”¨æˆ·ç”»åƒç®¡ç†

<table>
<tr>
<td width="50%">

**ğŸ“ ä¸ªäººä¿¡æ¯ç®¡ç†**
- æ€§åˆ«ã€å¹´é¾„ã€èº«é«˜ã€ä½“é‡
- ç›®æ ‡è®¾ç½®ï¼ˆå‡è„‚/å¢è‚Œ/ç»´æŒï¼‰
- æ´»åŠ¨ç­‰çº§é€‰æ‹©

</td>
<td width="50%">

**ğŸ“Š å¥åº·æŒ‡æ ‡è®¡ç®—**
- BMIï¼ˆèº«ä½“è´¨é‡æŒ‡æ•°ï¼‰
- BMRï¼ˆåŸºç¡€ä»£è°¢ç‡ï¼‰
- TDEEï¼ˆæ¯æ—¥æ€»èƒ½é‡æ¶ˆè€—ï¼‰

</td>
</tr>
</table>

---

### 2ï¸âƒ£ æ™ºèƒ½è®¡åˆ’ç”Ÿæˆ

<table>
<tr>
<td width="50%">

**ğŸ¯ è®¡åˆ’åˆ›å»º**
- è¾“å…¥ç›®æ ‡ä½“é‡å˜åŒ–
- è®¾ç½®è®¡åˆ’å‘¨æœŸ
- è‡ªåŠ¨è®¡ç®—æ¯æ—¥çƒ­é‡ç›®æ ‡

</td>
<td width="50%">

**ğŸ”„ åŠ¨æ€è°ƒæ•´**
- æ ¹æ®å®é™…æ‰§è¡Œæƒ…å†µè°ƒæ•´
- å¥åº·æ€§æ™ºèƒ½è¯„ä¼°
- è¿›åº¦å¯è§†åŒ–è¿½è¸ª

</td>
</tr>
</table>

---

### 3ï¸âƒ£ é¥®é£Ÿç®¡ç†ç³»ç»Ÿ

#### ğŸ” ä¸‰å±‚æ™ºèƒ½æœç´¢ç­–ç•¥

```
ç¬¬ä¸€å±‚ï¼šæœ¬åœ°æ•°æ®åº“ï¼ˆæé€Ÿå“åº” < 100msï¼‰
   â†“ æœªæ‰¾åˆ°
ç¬¬äºŒå±‚ï¼šAI æ™ºèƒ½ä¼°ç®—ï¼ˆå‡†ç¡®åº¦ 85%+ï¼‰
   â†“ å¤±è´¥
ç¬¬ä¸‰å±‚ï¼šOpen Food Facts APIï¼ˆæµ·é‡æ•°æ®ï¼‰
```

#### ğŸ“¸ AI æ‹ç…§è¯†é£Ÿ

- åŸºäº**é€šä¹‰åƒé—®è§†è§‰å¤§æ¨¡å‹**
- æ”¯æŒå¤šé£Ÿç‰©åŒæ—¶è¯†åˆ«
- è‡ªåŠ¨è®¡ç®—è¥å…»æˆåˆ†
- å¯ç¼–è¾‘è°ƒæ•´ä»½é‡

#### ğŸ“‹ è®°å½•ç®¡ç†

- âœ… æŒ‰é¤æ¬¡åˆ†ç±»ï¼ˆæ—©/åˆ/æ™š/åŠ é¤ï¼‰
- âœ… è‡ªå®šä¹‰èœå“åº“
- âœ… å¸¸ç”¨é£Ÿç‰©æ™ºèƒ½ç½®é¡¶
- âœ… çƒ­é‡/è¥å…»ç´ å®æ—¶æ±‡æ€»

---

### 4ï¸âƒ£ è¿åŠ¨ç®¡ç†

<table>
<tr>
<td width="50%">

**ğŸ’ª è¿åŠ¨è®°å½•**
- è¿åŠ¨ç±»å‹é€‰æ‹©
- æ—¶é•¿/æ¶ˆè€—è®°å½•
- æŒ‰æ—¥æœŸæŸ¥çœ‹å†å²

</td>
<td width="50%">

**ğŸ¯ æ™ºèƒ½æ¨è**
- æ ¹æ®çƒ­é‡å·®æ¨èè¿åŠ¨
- å¤šç§è¿åŠ¨æ–¹æ¡ˆå¯é€‰
- æ¶ˆè€—é‡ç²¾å‡†è®¡ç®—

</td>
</tr>
</table>

---

### 5ï¸âƒ£ æ¯æ—¥è¯„ä»·ç³»ç»Ÿ

#### ğŸš¦ çº¢ç»¿ç¯è¯„ä»·ç³»ç»Ÿ

| é¢œè‰² | çƒ­é‡å·®åå·® | çŠ¶æ€ |
|------|-----------|------|
| ğŸŸ¢ ç»¿ç¯ | â‰¤ 100 kcal | å®Œç¾ |
| ğŸŸ¡ é»„ç¯ | 100-300 kcal | è‰¯å¥½ |
| ğŸ”´ çº¢ç¯ | > 300 kcal | éœ€è°ƒæ•´ |

#### ğŸ“ˆ è¥å…»è¯„åˆ†ï¼ˆ0-100åˆ†ï¼‰

- è›‹ç™½è´¨æ‘„å…¥è¯„åˆ†ï¼ˆ40åˆ†ï¼‰
- ç¢³æ°´åŒ–åˆç‰©è¯„åˆ†ï¼ˆ35åˆ†ï¼‰
- è„‚è‚ªæ‘„å…¥è¯„åˆ†ï¼ˆ25åˆ†ï¼‰
- ğŸ¤– AI ç”Ÿæˆä¸ªæ€§åŒ–å»ºè®®

---

### 6ï¸âƒ£ æ•°æ®å¯è§†åŒ–

```
ğŸ“Š ä½“é‡è¶‹åŠ¿å›¾
â”œâ”€ æŠ˜çº¿å›¾å±•ç¤ºä½“é‡å˜åŒ–
â”œâ”€ ç›®æ ‡å¯¹æ¯”
â””â”€ è¾¾æ ‡ç‡è®¡ç®—

ğŸ“‰ è¥å…»ç»Ÿè®¡
â”œâ”€ ä¸‰å¤§è¥å…»ç´ å æ¯”
â”œâ”€ çƒ­é‡æ‘„å…¥è¶‹åŠ¿
â””â”€ è¥å…»å‡è¡¡åˆ†æ
```

---

### 7ï¸âƒ£ AI æ™ºèƒ½åŠ©æ‰‹

**ğŸ¤– åŸºäºé€šä¹‰åƒé—® AI**

- ğŸ“ **è¥å…»åˆ†æ**ï¼šåˆ†æè¿‘7æ—¥é¥®é£Ÿæ•°æ®ï¼Œè¯†åˆ«è¥å…»ç¼ºå£
- ğŸ¥— **é£Ÿè°±æ¨è**ï¼šæ ¹æ®åå¥½å’Œç›®æ ‡æ¨èé£Ÿè°±
- ğŸ’¡ **å»ºè®®ç”Ÿæˆ**ï¼šæä¾›å¯æ‰§è¡Œçš„æ”¹å–„å»ºè®®
- ğŸ¯ **ä¸ªæ€§åŒ–å®šåˆ¶**ï¼šé€‚é…ä¸åŒå¥åº·ç›®æ ‡

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å¾®ä¿¡å°ç¨‹åºå‰ç«¯                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  é¦–é¡µ    â”‚  é¥®é£Ÿ    â”‚  è¿åŠ¨    â”‚  ç»Ÿè®¡    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â”‚
â”‚       â”‚          â”‚          â”‚          â”‚                 â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                  â”‚                                       â”‚
â”‚            utils/cloudApi.js (ç»Ÿä¸€è°ƒç”¨å±‚)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚           â”‚           â”‚
        â–¼           â–¼           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ health  â”‚ â”‚  diet    â”‚ â”‚  qwen    â”‚  â† äº‘å‡½æ•°
  â”‚ Service â”‚ â”‚ Service  â”‚ â”‚   AI     â”‚
  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
       â”‚           â”‚            â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
            â”‚             â”‚
            â–¼             â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ äº‘æ•°æ®åº“  â”‚  â”‚ äº‘å­˜å‚¨    â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å‰ç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| å¾®ä¿¡å°ç¨‹åº | æœ€æ–° | å‰ç«¯æ¡†æ¶ |
| ES6+ | - | JavaScriptè¯­æ³• |
| WXML/WXSS | - | é¡µé¢ç»“æ„ä¸æ ·å¼ |
| å¾®ä¿¡äº‘å¼€å‘SDK | 3.12.1+ | äº‘èƒ½åŠ›è°ƒç”¨ |

### åç«¯æŠ€æœ¯æ ˆï¼ˆäº‘å‡½æ•°ï¼‰

| äº‘å‡½æ•° | æŠ€æœ¯æ ˆ | ä¾èµ–åŒ… | åŠŸèƒ½ |
|--------|--------|--------|------|
| **healthService** | Node.js 18.15 | `wx-server-sdk@2.6.3` | ç”¨æˆ·ä¿¡æ¯ã€è®¡åˆ’ã€è¯„ä»·ã€è¿åŠ¨ |
| **dietService** | Node.js 18.15 | `wx-server-sdk@2.4.0`<br>`axios@1.6.0` | é£Ÿç‰©æœç´¢ã€è¯†åˆ«ã€è®°å½•ã€çƒ­é‡è®¡ç®— |
| **qwenAI** | Node.js 18.15 | `wx-server-sdk@2.6.3` | AIåˆ†æã€å»ºè®®ç”Ÿæˆ |
| **foodRecognitionQwen** | Node.js 18.15 | `wx-server-sdk@2.4.0`<br>`openai@4.9.1` | å›¾ç‰‡è¯†åˆ«ï¼ˆé€šä¹‰åƒé—®VLï¼‰ |

### æ•°æ®åº“è®¾è®¡

#### é›†åˆåˆ—è¡¨

| é›†åˆå | è¯´æ˜ | æƒé™ | å…³é”®å­—æ®µ |
|--------|------|------|----------|
| **UserProfiles** | ç”¨æˆ·ä¿¡æ¯ | ä»…åˆ›å»ºè€…å¯è¯»å†™ | gender, age, height, weight, bmr, tdee, bmi |
| **health_plans** | å‡é‡è®¡åˆ’ | ä»…åˆ›å»ºè€…å¯è¯»å†™ | targetWeightChange, totalDays, dailyDeficit |
| **DietLog** | é¥®é£Ÿè®°å½• | ä»…åˆ›å»ºè€…å¯è¯»å†™ | name, calories, protein, fat, carbs, mealType |
| **ExerciseLog** | è¿åŠ¨è®°å½• | ä»…åˆ›å»ºè€…å¯è¯»å†™ | name, duration, calories, date |
| **FoodDB** | é£Ÿç‰©æ•°æ®åº“ | æ‰€æœ‰ç”¨æˆ·å¯è¯»<br>ä»…åˆ›å»ºè€…å¯å†™ | name, calories, protein, fat, carbs, source |
| **UserDishes** | è‡ªå®šä¹‰èœå“ | ä»…åˆ›å»ºè€…å¯è¯»å†™ | name, calories, ingredients, servingSize |
| **DailyEvaluations** | æ¯æ—¥è¯„ä»· | ä»…åˆ›å»ºè€…å¯è¯»å†™ | date, actualDeficit, nutritionScore, suggestions |

### å¤–éƒ¨ API é›†æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é€šä¹‰åƒé—® API (DashScope)                â”‚
â”‚  â”œâ”€ è§†è§‰æ¨¡å‹ (qwen-vl-max)              â”‚
â”‚  â”‚  â””â”€ é£Ÿç‰©å›¾ç‰‡è¯†åˆ«                     â”‚
â”‚  â””â”€ æ–‡æœ¬æ¨¡å‹ (qwen-turbo)               â”‚
â”‚     â””â”€ è¥å…»åˆ†æã€å»ºè®®ç”Ÿæˆ                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Open Food Facts API                    â”‚
â”‚  â””â”€ é£Ÿç‰©è¥å…»æ•°æ®æŸ¥è¯¢ï¼ˆå…œåº•æ–¹æ¡ˆï¼‰          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒå‡†å¤‡

#### 1. å®‰è£…å¼€å‘å·¥å…·

- [å¾®ä¿¡å¼€å‘è€…å·¥å…·](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html) ï¼ˆæœ€æ–°ç¨³å®šç‰ˆï¼‰
- Node.js 16+ ï¼ˆç”¨äºäº‘å‡½æ•°ä¾èµ–å®‰è£…ï¼‰

#### 2. æ³¨å†Œè´¦å·

1. æ³¨å†Œ[å¾®ä¿¡å°ç¨‹åºè´¦å·](https://mp.weixin.qq.com/wxopen/waregister?action=step1)
2. å¼€é€š[äº‘å¼€å‘æœåŠ¡](https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/getting-started.html)ï¼ˆå…è´¹ç‰ˆå³å¯ï¼‰

#### 3. è·å– API Key

ç”³è¯·[é€šä¹‰åƒé—® API Key](https://dashscope.aliyuncs.com/)ï¼ˆç”¨äº AI åŠŸèƒ½ï¼‰

---

### éƒ¨ç½²æ­¥éª¤

#### ç¬¬ä¸€æ­¥ï¼šå…‹éš†é¡¹ç›®

```bash
git clone https://github.com/ALostElk/lightburning.git
cd lightburning
```

#### ç¬¬äºŒæ­¥ï¼šé…ç½®äº‘å¼€å‘ç¯å¢ƒ

1. ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·æ‰“å¼€é¡¹ç›®
2. ä¿®æ”¹ `miniprogram/app.js`ï¼Œé…ç½®æ‚¨çš„äº‘å¼€å‘ç¯å¢ƒ IDï¼š

```javascript
App({
  onLaunch() {
    wx.cloud.init({
      env: 'your-env-id',  // â† æ”¹ä¸ºæ‚¨çš„ç¯å¢ƒID
      traceUser: true 
    })
  }
})
```

#### ç¬¬ä¸‰æ­¥ï¼šé…ç½® API Key

åœ¨äº‘å¼€å‘æ§åˆ¶å°è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

1. æ‰“å¼€**äº‘å¼€å‘æ§åˆ¶å°** â†’ **è®¾ç½®** â†’ **ç¯å¢ƒå˜é‡**
2. æ·»åŠ ä»¥ä¸‹å˜é‡ï¼š

| å˜é‡å | å€¼ | ç”¨é€” |
|--------|-----|------|
| `DASHSCOPE_API_KEY` | `sk-xxxxx` | é€šä¹‰åƒé—® API Key |

#### ç¬¬å››æ­¥ï¼šéƒ¨ç½²äº‘å‡½æ•°

**é‡è¦ï¼šå¿…é¡»é€‰æ‹©"äº‘ç«¯å®‰è£…ä¾èµ–"ï¼**

åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ï¼Œå¯¹ä»¥ä¸‹ 4 ä¸ªäº‘å‡½æ•°ä¾æ¬¡æ“ä½œï¼š

1. å³é”®ç‚¹å‡»äº‘å‡½æ•°æ–‡ä»¶å¤¹
2. é€‰æ‹© **"ä¸Šä¼ å¹¶éƒ¨ç½²ï¼šäº‘ç«¯å®‰è£…ä¾èµ–"**
3. ç­‰å¾…éƒ¨ç½²å®Œæˆ

éœ€éƒ¨ç½²çš„äº‘å‡½æ•°ï¼š
- âœ… `healthService`
- âœ… `dietService`
- âœ… `qwenAI` âš¡ **v2.0.1 å·²æ›´æ–°ï¼ˆä¿®å¤è¶…æ—¶é—®é¢˜ï¼‰**
- âœ… `foodRecognitionQwen`

> **æ³¨æ„**ï¼šå¦‚æœä¹‹å‰å·²éƒ¨ç½²è¿‡ `qwenAI` äº‘å‡½æ•°ï¼Œè¯·åŠ¡å¿…é‡æ–°éƒ¨ç½²ä»¥åº”ç”¨è¶…æ—¶é…ç½®æ›´æ–°ã€‚

#### ç¬¬äº”æ­¥ï¼šåˆ›å»ºæ•°æ®åº“é›†åˆ

åœ¨äº‘å¼€å‘æ§åˆ¶å° â†’ æ•°æ®åº“ï¼Œåˆ›å»ºä»¥ä¸‹é›†åˆï¼š

```bash
# ç”¨æˆ·ç›¸å…³
UserProfiles          # æƒé™ï¼šä»…åˆ›å»ºè€…å¯è¯»å†™
health_plans          # æƒé™ï¼šä»…åˆ›å»ºè€…å¯è¯»å†™

# è®°å½•ç›¸å…³
DietLog               # æƒé™ï¼šä»…åˆ›å»ºè€…å¯è¯»å†™
ExerciseLog           # æƒé™ï¼šä»…åˆ›å»ºè€…å¯è¯»å†™
exercise_records      # æƒé™ï¼šä»…åˆ›å»ºè€…å¯è¯»å†™ï¼ˆå¤‡ç”¨ï¼‰

# æ•°æ®åº“
FoodDB                # æƒé™ï¼šæ‰€æœ‰ç”¨æˆ·å¯è¯»ï¼Œä»…åˆ›å»ºè€…å¯å†™
UserDishes            # æƒé™ï¼šä»…åˆ›å»ºè€…å¯è¯»å†™

# è¯„ä»·ç›¸å…³
DailyEvaluations      # æƒé™ï¼šä»…åˆ›å»ºè€…å¯è¯»å†™
```

#### ç¬¬å…­æ­¥ï¼šåˆå§‹åŒ–é£Ÿç‰©æ•°æ®

åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·çš„ Console æ§åˆ¶å°æ‰§è¡Œï¼š

```javascript
wx.cloud.callFunction({
  name: 'dietService',
  data: { action: 'initBuiltinFoods' }
}).then(res => {
  console.log('åˆå§‹åŒ–æˆåŠŸ:', res);
});
```

æˆåŠŸåä¼šçœ‹åˆ°ç±»ä¼¼æç¤ºï¼š
```
å·²æ·»åŠ  45 æ¡é£Ÿç‰©æ•°æ®
```

#### ç¬¬ä¸ƒæ­¥ï¼šè¿è¡Œå°ç¨‹åº

ç‚¹å‡»**ç¼–è¯‘**æŒ‰é’®ï¼Œå³å¯åœ¨æ¨¡æ‹Ÿå™¨ä¸­ä½“éªŒï¼

---

## ğŸ“š å¼€å‘æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ | é‡è¦æ€§ |
|------|------|--------|
| [â­ æ¥å£æ•´åˆæ–‡æ¡£](æ¥å£æ•´åˆæ–‡æ¡£.md) | æ‰€æœ‰ API æ¥å£è¯¦ç»†è¯´æ˜ | â­â­â­â­â­ |
| [âš¡ äº‘å‡½æ•°è¶…æ—¶ä¿®å¤è¯´æ˜](äº‘å‡½æ•°è¶…æ—¶ä¿®å¤è¯´æ˜.md) | AIåŠŸèƒ½è¶…æ—¶é—®é¢˜è§£å†³æ–¹æ¡ˆ | â­â­â­â­ |
| [å·¥å…·æ¨¡å—è¯´æ˜](miniprogram/utils/README.md) | Utils å·¥å…·å‡½æ•°ä½¿ç”¨æŒ‡å— | â­â­â­â­ |
| [QwenAIäº‘å‡½æ•°è¯´æ˜](cloudfunctions/qwenAI/README.md) | AIäº‘å‡½æ•°éƒ¨ç½²ä¸é…ç½® | â­â­â­ |

### API å¿«é€Ÿå‚è€ƒ

#### å¥åº·æœåŠ¡ (healthService)

```javascript
import * as api from '../../utils/cloudApi.js';

// æ›´æ–°ç”¨æˆ·ä¿¡æ¯
await api.updateProfile({ 
  gender: 'male', 
  age: 25, 
  height: 175, 
  weight: 70 
});

// è·å–ç”¨æˆ·ä¿¡æ¯
const profile = await api.getProfile();

// ç”Ÿæˆå‡é‡è®¡åˆ’ï¼ˆç›®æ ‡å‡5kgï¼Œ60å¤©å®Œæˆï¼‰
await api.generatePlan(-5, 60);

// æ¯æ—¥è¯„ä»·
const evaluation = await api.evaluateDaily('2025-12-09');

// æ¨èè¿åŠ¨
const exercises = await api.recommendExercise();

// è®°å½•è¿åŠ¨
await api.logExercise({
  name: 'æ…¢è·‘',
  duration: 30,
  calories: 300
});
```

#### é¥®é£ŸæœåŠ¡ (dietService)

```javascript
// æœç´¢é£Ÿç‰©
const result = await api.searchFood('é¸¡èƒ¸è‚‰');

// æ‹ç…§è¯†åˆ«é£Ÿç‰©
const foods = await api.recognizeFood({ 
  fileID: 'cloud://xxx.jpg' 
});

// æ·»åŠ é¥®é£Ÿè®°å½•
await api.addDietLog({
  name: 'é¸¡èƒ¸è‚‰',
  calories: 165,
  protein: 31,
  fat: 3.6,
  carbs: 0,
  amount: 150,
  unit: 'g',
  mealType: 'lunch'
});

// è·å–ä»Šæ—¥é¥®é£Ÿè®°å½•
const logs = await api.getDietLogs('2025-12-09');

// æ·»åŠ è‡ªå®šä¹‰èœå“
await api.addCustomDish({
  name: 'æˆ‘çš„ç‰¹åˆ¶æ²™æ‹‰',
  calories: 320,
  protein: 25,
  fat: 10,
  carbs: 35
});
```

#### AI æœåŠ¡ (qwenAI)

```javascript
// AI è¥å…»åˆ†æä¸å»ºè®®
const suggestion = await api.analyzeAndRecommend(
  userData,      // ç”¨æˆ·ä¿¡æ¯
  dietRecords,   // é¥®é£Ÿè®°å½•
  nutritionGap   // è¥å…»ç¼ºå£
);

// ç”Ÿæˆé£Ÿè°±æ¨èç†ç”±
const reason = await api.generateRecipeReason(
  recipe,        // é£Ÿè°±ä¿¡æ¯
  userData,      // ç”¨æˆ·ä¿¡æ¯
  nutritionGap   // è¥å…»ç¼ºå£
);
```

#### é£Ÿè°±æ¨è

```javascript
// è·å–æ¨èé£Ÿè°±
const recipes = await api.getRecommendedRecipes({
  type: 'goal',   // 'goal' | 'preference' | 'ai'
  limit: 5
});

// åˆ†æè¥å…»ç¼ºå£ï¼ˆè¿‘7å¤©ï¼‰
const gap = await api.analyzeNutritionGap(7);

// è·å–å¸¸åƒé£Ÿæ
const ingredients = await api.getFavoriteIngredients(10);
```

---

## ğŸ’» å¼€å‘è§„èŒƒ

### ä»£ç è§„èŒƒ

âœ… **å¿…é¡»éµå®ˆ**

1. æ‰€æœ‰äº‘å‡½æ•°è°ƒç”¨**å¿…é¡»é€šè¿‡** `utils/cloudApi.js`
   ```javascript
   // âŒ é”™è¯¯
   wx.cloud.callFunction({ name: 'healthService', ... })
   
   // âœ… æ­£ç¡®
   import * as api from '../../utils/cloudApi.js';
   await api.getProfile();
   ```

2. å¥åº·è®¡ç®—ä½¿ç”¨ `utils/calculator.js`
   ```javascript
   import { calculateBMR, calculateTDEE } from '../../utils/calculator.js';
   ```

3. ç»Ÿä¸€é”™è¯¯å¤„ç†
   ```javascript
   try {
     await api.updateProfile(data);
     api.showSuccess('ä¿å­˜æˆåŠŸ');
   } catch (error) {
     api.handleError(error, 'ä¿å­˜å¤±è´¥');
   }
   ```

### æ–‡ä»¶å‘½åè§„èŒƒ

```
pages/
  â”œâ”€â”€ module-name/
  â”‚   â”œâ”€â”€ index.js      # é¡µé¢é€»è¾‘
  â”‚   â”œâ”€â”€ index.wxml    # é¡µé¢ç»“æ„
  â”‚   â”œâ”€â”€ index.wxss    # é¡µé¢æ ·å¼
  â”‚   â””â”€â”€ index.json    # é¡µé¢é…ç½®
```

### Git æäº¤è§„èŒƒ

```bash
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: é‡æ„
perf: æ€§èƒ½ä¼˜åŒ–
test: æµ‹è¯•ç›¸å…³
```

---

## âš ï¸ å®‰å…¨æ³¨æ„äº‹é¡¹

### âŒ ä¸¥ç¦ä»¥ä¸‹æ“ä½œ

1. **å‰ç«¯ä»£ç ä¸­ç›´æ¥ä½¿ç”¨ API Key**
2. **è·³è¿‡äº‘å‡½æ•°ç›´æ¥è°ƒç”¨ç¬¬ä¸‰æ–¹ API**
3. **åœ¨ä»£ç ä¸­ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯**

### âœ… å®‰å…¨å®è·µ

1. **API Key å­˜å‚¨åœ¨äº‘å‡½æ•°ç¯å¢ƒå˜é‡ä¸­**
2. **æ‰€æœ‰ AI è°ƒç”¨é€šè¿‡äº‘å‡½æ•°ä¸­è½¬**
3. **æ•°æ®åº“æƒé™ä½¿ç”¨"ä»…åˆ›å»ºè€…å¯è¯»å†™"**

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### å¼€å‘æµç¨‹

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'feat: Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æäº¤ Pull Request

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](https://opensource.org/licenses/MIT) å¼€æºåè®®ã€‚

---

## ğŸ“® è”ç³»æ–¹å¼

- **é¡¹ç›®åœ°å€**: [https://github.com/ALostElk/lightburning](https://github.com/ALostElk/lightburning)
- **é—®é¢˜åé¦ˆ**: [Issues](https://github.com/ALostElk/lightburning/issues)

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Star æ”¯æŒä¸€ä¸‹ï¼â­**

Made with â¤ï¸ by LightBurning Team

</div>
