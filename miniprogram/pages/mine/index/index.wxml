<!-- pages/mine/index/index.wxml -->
<view class="page">
  <!-- 极简头部 -->
  <view class="header-section">
    <view class="text-area">
      <text class="greeting-text">{{greeting}}，</text>
      <text class="name-text">{{userInfo.nickName}}</text>
      <view class="edit-pill" bindtap="goToEdit">
        <text>编辑资料</text>
      </view>
    </view>
    
    <view class="avatar-area" bindtap="chooseAvatar">
      <!-- 动态呼吸光环 -->
      <view class="avatar-glow" style="background: {{ringColor}}; box-shadow: 0 0 30rpx {{ringColor}};"></view>
      <image class="avatar-img" src="{{userInfo.avatarUrl}}" mode="aspectFill"></image>
    </view>
  </view>

  <!-- 功能区 (无图标极简设计) -->
  <view class="minimal-grid">
    <!-- 我的计划 -->
    <view class="minimal-item" bindtap="goToPlan">
      <view class="item-content">
        <text class="item-title">我的计划</text>
        <text class="item-desc">管理目标</text>
      </view>
    </view>

    <!-- 自定义菜品 -->
    <view class="minimal-item" bindtap="goToCustomDishes">
      <view class="item-content">
        <text class="item-title">自定义菜品</text>
        <text class="item-desc">专属菜单</text>
      </view>
    </view>

    <!-- 收藏食谱 -->
    <view class="minimal-item" bindtap="goToFavorites">
      <view class="item-content">
        <text class="item-title">收藏食谱</text>
        <text class="item-desc">美味常备</text>
      </view>
    </view>

    <!-- 数据统计 -->
    <view class="minimal-item" bindtap="goToStats">
      <view class="item-content">
        <text class="item-title">数据统计</text>
        <text class="item-desc">趋势分析</text>
      </view>
    </view>
  </view>

   <!-- 昵称编辑弹窗 -->
  <view class="modal-mask" wx:if="{{isNicknameModalShow}}" bindtap="cancelNicknameEdit"></view>
  <view class="modal-content glass-modal" wx:if="{{isNicknameModalShow}}">
    <text class="modal-title">修改昵称</text>
    <input 
      class="nickname-input" 
      placeholder="请输入新昵称" 
      value="{{newNickname}}"
      bindinput="onNicknameInput"
    />
    <view class="modal-btns">
      <button class="modal-btn cancel" bindtap="cancelNicknameEdit">取消</button>
      <button class="modal-btn confirm" bindtap="confirmNicknameEdit">确认</button>
    </view>
  </view>
</view>