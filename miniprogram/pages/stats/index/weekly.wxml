<view class="page">
  <!-- 顶部：本周总结 -->
  <view class="header-card">
    <view class="header-title-row">
      <view class="header-title">本周报告</view>
      <view class="header-sub">{{weekRangeText}}</view>
    </view>
    <view class="summary-row">
      <view class="summary-block">
        <view class="summary-label">体重变化</view>
        <view class="summary-value">{{summary.weightChangeText}}</view>
        <view class="summary-extra">当前：{{summary.currentWeight || '--'}} kg</view>
      </view>
      <view class="summary-block">
        <view class="summary-label">平均净热量</view>
        <view class="summary-value">{{summary.avgNetCalories || '--'}} kcal</view>
        <view class="summary-extra">{{summary.netCaloriesHint}}</view>
      </view>
    </view>
    <view class="summary-row">
      <view class="summary-block">
        <view class="summary-label">总运动时长</view>
        <view class="summary-value">{{summary.totalDuration}} min</view>
        <view class="summary-extra">{{summary.totalCount}} 次运动</view>
      </view>
      <view class="summary-block">
        <view class="summary-label">本周达标率</view>
        <view class="summary-value">{{summary.goalRate}}%</view>
        <view class="summary-extra">达标 {{summary.goalDays}} / {{summary.totalDays}} 天</view>
      </view>
    </view>
  </view>

  <!-- 每日完成度（以后可以接入雷达图，现在先用列表 + 进度条） -->
  <view class="section-card">
    <view class="section-header">
      <view class="section-title">每日完成度</view>
      <view class="section-sub">本周 7 天整体表现</view>
    </view>

    <view wx:if="{{dailyScores.length === 0}}" class="empty-text">
      本周暂无完整记录，建议坚持记录饮食和运动～
    </view>

    <block wx:for="{{dailyScores}}" wx:key="date">
      <view class="day-row">
        <view class="day-left">
          <view class="day-name">{{item.label}}</view>
          <view class="day-date">{{item.date}}</view>
        </view>
        <view class="day-center">
          <view class="day-bar">
          <view
              class="day-bar-fill"
           style="width: {{item.scoreWidth}};"
           ></view>
</view>

        </view>
        <view class="day-right">
          <view class="day-score">{{item.score}}</view>
        </view>
      </view>
    </block>
  </view>

  <!-- 优秀 / 需改进 -->
  <view class="section-card">
    <view class="section-header">
      <view class="section-title">亮点表现</view>
    </view>
    <view class="desc-text">{{highlights}}</view>
  </view>

  <view class="section-card">
    <view class="section-header">
      <view class="section-title">需要改进</view>
    </view>
    <view class="desc-text">{{improvements}}</view>
  </view>

  <!-- 下周建议 + 分享 -->
  <view class="section-card">
    <view class="section-header">
      <view class="section-title">下周建议</view>
    </view>
    <view class="desc-text">{{suggestions}}</view>

    <button
      class="share-btn"
      open-type="share"
    >分享本周报告</button>
  </view>
</view>
