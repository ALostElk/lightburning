<!--pages/stats/index/index.wxml-->
<view class="container">
  <view class="header">
    <text class="title">æ•°æ®ç»Ÿè®¡</text>
  </view>

  <!-- æ—¶é—´èŒƒå›´é€‰æ‹© -->
  <view class="time-range">
    <view class="range-btn {{timeRange === 7 ? 'active' : ''}}" data-range="7" bindtap="onTimeRangeChange">7å¤©</view>
    <view class="range-btn {{timeRange === 30 ? 'active' : ''}}" data-range="30" bindtap="onTimeRangeChange">30å¤©</view>
    <view class="range-btn {{timeRange === 90 ? 'active' : ''}}" data-range="90" bindtap="onTimeRangeChange">90å¤©</view>
  </view>

  <!-- é¥®é£Ÿç»Ÿè®¡ -->
  <view class="card">
    <view class="card-title">ğŸ“Š é¥®é£Ÿç»Ÿè®¡</view>
    
    <view class="summary-grid">
      <view class="summary-item">
        <text class="summary-value primary">{{dietSummary.totalCalories}}</text>
        <text class="summary-label">æ€»çƒ­é‡(kcal)</text>
      </view>
      <view class="summary-item">
        <text class="summary-value">{{dietSummary.avgCalories}}</text>
        <text class="summary-label">æ—¥å‡çƒ­é‡</text>
      </view>
      <view class="summary-item">
        <text class="summary-value protein">{{dietSummary.totalProtein}}g</text>
        <text class="summary-label">è›‹ç™½è´¨</text>
      </view>
      <view class="summary-item">
        <text class="summary-value carbs">{{dietSummary.totalCarbs}}g</text>
        <text class="summary-label">ç¢³æ°´</text>
      </view>
      <view class="summary-item">
        <text class="summary-value fat">{{dietSummary.totalFat}}g</text>
        <text class="summary-label">è„‚è‚ª</text>
      </view>
      <view class="summary-item">
        <text class="summary-value">{{dietLogs.length}}</text>
        <text class="summary-label">è®°å½•æ¬¡æ•°</text>
      </view>
    </view>
  </view>

  <!-- è¿åŠ¨ç»Ÿè®¡ -->
  <view class="card">
    <view class="card-title">ğŸ’ª è¿åŠ¨ç»Ÿè®¡</view>
    
    <view class="summary-grid">
      <view class="summary-item">
        <text class="summary-value primary">{{exerciseSummary.totalDuration}}</text>
        <text class="summary-label">æ€»æ—¶é•¿(åˆ†é’Ÿ)</text>
      </view>
      <view class="summary-item">
        <text class="summary-value">{{exerciseSummary.totalCalories}}</text>
        <text class="summary-label">æ€»æ¶ˆè€—(kcal)</text>
      </view>
      <view class="summary-item">
        <text class="summary-value">{{exerciseSummary.avgCalories}}</text>
        <text class="summary-label">å¹³å‡æ¶ˆè€—</text>
      </view>
      <view class="summary-item">
        <text class="summary-value">{{exerciseSummary.count}}</text>
        <text class="summary-label">è¿åŠ¨æ¬¡æ•°</text>
      </view>
    </view>
  </view>

  <!-- ä½“é‡å˜åŒ– -->
  <view class="card" wx:if="{{weightRecords.length > 0}}">
    <view class="card-title">âš–ï¸ ä½“é‡å˜åŒ–</view>
    
    <view class="weight-change">
      <text class="weight-value {{weightChange < 0 ? 'decrease' : 'increase'}}">
        {{weightChange > 0 ? '+' : ''}}{{weightChange}}kg
      </text>
      <text class="weight-label">è¿‘{{timeRange}}å¤©å˜åŒ–</text>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{dietLogs.length === 0 && exerciseLogs.length === 0 && !loading}}">
    <text class="empty-icon">ğŸ“Š</text>
    <text class="empty-text">æš‚æ— ç»Ÿè®¡æ•°æ®</text>
    <text class="empty-hint">å¼€å§‹è®°å½•é¥®é£Ÿå’Œè¿åŠ¨å§</text>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-state" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>
</view>

