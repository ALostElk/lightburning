<view class="diet-container">
  <view class="header">
    <view class="date-nav">
      <view class="date-selector">
        <text class="current-date">{{currentDate}}</text>
      </view>
    </view>
    
    <view class="daily-summary">
      <view class="summary-item">
        <text class="label">å·²æ‘„å…¥</text>
        <text class="value primary">{{consumedCalories}}</text>
        <text class="unit">åƒå¡</text>
      </view>
      <view class="divider"></view>
      <view class="summary-item">
        <text class="label">ç›®æ ‡</text>
        <text class="value">{{targetCalories}}</text>
        <text class="unit">åƒå¡</text>
      </view>
      <view class="divider"></view>
      <view class="summary-item">
        <text class="label">å‰©ä½™</text>
        <text class="value {{remaining >= 0 ? 'success' : 'danger'}}">{{remaining}}</text>
        <text class="unit">åƒå¡</text>
      </view>
    </view>
  </view>

  <view class="action-buttons">
    <view class="action-btn" bindtap="goToCamera">
      <view class="btn-icon-text">ğŸ“·</view>
      <text class="btn-text">æ‹ç…§è¯†åˆ«</text>
    </view>
    <view class="action-btn" bindtap="goToSearch">
      <view class="btn-icon-text">ğŸ”</view>
      <text class="btn-text">æœç´¢é£Ÿç‰©</text>
    </view>
    <view class="action-btn" bindtap="goToManual">
      <view class="btn-icon-text">â•</view>
      <text class="btn-text">æ‰‹åŠ¨æ·»åŠ </text>
    </view>
  </view>

  <view class="meals-section">
    <view class="meal-group" wx:for="{{meals}}" wx:key="type">
      <view class="meal-header">
        <text class="meal-name">{{item.name}}</text>
        <text class="meal-calories">{{item.calories}} åƒå¡</text>
      </view>
      <view class="food-list" wx:if="{{item.foods.length > 0}}">
        <view class="food-item" wx:for="{{item.foods}}" wx:key="id" wx:for-item="food">
          <view class="food-info">
            <text class="food-name">{{food.name}}</text>
            <text class="food-detail">{{food.amount}}{{food.unit}} Â· {{food.calories}}åƒå¡</text>
          </view>
          <view class="food-actions">
            <text class="action-text" bindtap="editFood" data-meal="{{item.type}}" data-id="{{food.id}}">ç¼–è¾‘</text>
            <text class="action-text delete" bindtap="deleteFood" data-meal="{{item.type}}" data-id="{{food.id}}">åˆ é™¤</text>
          </view>
        </view>
      </view>
      <view class="empty-meal" wx:else bindtap="addMeal" data-type="{{item.type}}">
        <text class="empty-text">ç‚¹å‡»æ·»åŠ {{item.name}}é£Ÿç‰©</text>
      </view>
    </view>
  </view>
</view>
