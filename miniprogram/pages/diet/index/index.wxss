/**
 * 饮食记录主页 - diet/index
 * 设计语言: Daylight Futurism (日光未来主义)
 * 1:1 复刻 React 参考项目样式
 */

/* ============ 页面容器 ============ */
.page-container {
  min-height: 100vh;
  padding-bottom: 200rpx;
  position: relative;
  /* 修改：对齐首页的极淡冷调渐变 */
  background: linear-gradient(180deg, #F5FAFF 0%, #FFFFFF 100%);
}

/* ============ 主内容区 ============ */
.main-content {
  padding: 24rpx;
  padding-top: 120rpx; /* 补偿删除的导航条空间（状态栏 + 导航条内容） */
}

/* ============ 日期切换导航栏 - 扁平化风格 ============ */
/* ============ 日期切换导航栏 - 复刻首页极简风格 ============ */

/* 1. 容器：去除背景和边框，改为居中布局 */
.date-nav-bar {
  display: flex;
  align-items: center;
  justify-content: center; /* 居中对齐 */
  gap: 32rpx;              /* 增加间距 */
  margin-bottom: 32rpx;
  padding: 0;              /* 移除内边距 */
  
  /* 重置原有的卡片样式 */
  background: transparent;
  border: none;
  box-shadow: none;
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}

/* 2. 左右箭头：去除圆形背景，改为简约图标 */
.date-nav-arrow {
  width: auto;             /* 重置宽度 */
  height: auto;            /* 重置高度 */
  padding: 16rpx;
  background: transparent; /* 移除背景 */
  border: none;            /* 移除边框 */
  box-shadow: none;        /* 移除阴影 */
  border-radius: 0;
  
  /* 字体样式 */
  color: #94A3B8; /* Slate-400 */
  display: flex;
  align-items: center;
  justify-content: center;
}

/* 箭头图标微调 */
.arrow-icon {
  font-size: 32rpx; /* 稍微调小一点 */
  font-weight: 400;
  color: inherit;   /* 继承父级颜色 */
}

/* 点击态 */
.date-nav-arrow:active {
  background: transparent;
  transform: scale(0.9);
  opacity: 0.7;
}

/* 3. 中间日期胶囊：保留玻璃质感 */
.date-nav-center {
  display: flex;
  align-items: center;
  gap: 12rpx;
  padding: 12rpx 40rpx;
  border-radius: 40rpx;
  
  /* 给整个日期胶囊加一个微背景 */
  background: rgba(255, 255, 255, 0.4);
  border: 1rpx solid rgba(255, 255, 255, 0.6);
  box-shadow: 0 4rpx 12rpx rgba(148, 163, 184, 0.05);
}

/* 中间文字 */
.date-nav-text {
  font-size: 30rpx;
  font-weight: 600;
  color: #334155; /* Slate-700 */
  background: none;
  -webkit-text-fill-color: initial;
}

/* 日期下拉图标 */
.date-icon {
  /* 替换原来的字符样式，或者对其进行旋转/缩小优化 */
  font-size: 20rpx; 
  color: #94A3B8;
  margin-left: 8rpx;
  opacity: 0.8;
  /* 如果可能，可以用 CSS 画一个小三角代替字符，更精致 */
  /* transform: rotate(0deg); */ 
}

/* 点击态 */
.date-nav-center:active {
  background: rgba(255, 255, 255, 0.8);
  transform: scale(0.98);
}

/* ============ AI 分析横幅 ============ */
.ai-banner {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  padding: 24rpx;
  background: linear-gradient(135deg, rgba(61, 155, 255, 0.1) 0%, rgba(82, 196, 26, 0.1) 100%);
  border-radius: 24rpx;
  border: 1rpx solid rgba(61, 155, 255, 0.2);
  margin-bottom: 24rpx;
}

.ai-banner-content {
  display: flex;
  align-items: flex-start;
  gap: 16rpx;
  flex: 1;
}

.ai-icon-wrapper {
  width: 56rpx;
  height: 56rpx;
  background: linear-gradient(135deg, #3D9BFF 0%, #52C41A 100%);
  border-radius: 16rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.ai-icon {
  font-size: 28rpx;
}

.ai-text {
  display: flex;
  flex-direction: column;
  gap: 4rpx;
}

.ai-title {
  font-size: 24rpx;
  font-weight: 600;
  color: #3D9BFF;
}

.ai-message {
  font-size: 26rpx;
  color: #1F2937;
  line-height: 1.5;
}

.ai-close {
  width: 40rpx;
  height: 40rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #9CA3AF;
  font-size: 32rpx;
}

/* ============ 仪表盘卡片 ============ */
/* 仪表盘与餐次卡片 - 统一使用首页 Hero Card 的核心质感 */
.dashboard-card,
.meal-card {
  /* 背景：高透纯白，无色偏 */
  background: rgba(255, 255, 255, 0.6) !important;
  /* 质感：强磨砂 */
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  /* 边框：高亮白边框 (解决"没边框"的问题) */
  border: 1rpx solid rgba(255, 255, 255, 0.8) !important;
  /* 阴影：首页同款微阴影 + 内发光 (增加实体感) */
  box-shadow: 
    0 20rpx 40rpx rgba(148, 163, 184, 0.05), /* 极淡的投影 */
    inset 0 0 0 1rpx rgba(255, 255, 255, 0.5) !important; /* 玻璃边缘光泽 */
  /* 保持圆角 */
  border-radius: 40rpx; /* 统一圆角大小 */
  overflow: hidden;
}

/* 修复卡片点击态：纯白 -> 浅绿光晕 */
.meal-card {
  transition: all 0.2s ease; /* 确保过渡平滑 */
}

.dashboard-card {
  /* 1. 回归纯净：使用极低不透明度的白色，让底下的光晕能透出来 */
  background: rgba(255, 255, 255, 0.5) !important; 
  
  /* 2. 移除导致"浓郁"的背景图片设置 */
  background-image: none !important;

  /* 3. 保持质感：强磨砂 + 高亮边框 */
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1rpx solid rgba(255, 255, 255, 0.85) !important;

  /* 4. 核心修改：添加立体弥散阴影 */
  box-shadow:
    /* 1. 主阴影：大半径、低透明度、向下偏移，模拟悬浮感 */
    /* === 选项 A: 如果球体是淡绿色 (推荐) === */
    0 30rpx 60rpx -15rpx rgba(16, 185, 129, 0.15), 
    
    /* === 选项 B: 如果球体是橙色 (备选) === */
    /* 0 30rpx 60rpx -15rpx rgba(255, 107, 53, 0.15), */
    
    /* 2. 玻璃内描边：保持边缘清晰锐利 */
    inset 0 0 0 1rpx rgba(255, 255, 255, 0.8) !important;
    
  /* 保持圆角等布局属性 */
  border-radius: 40rpx;
  position: relative;
  z-index: 10; /* 确保卡片层级正确，阴影不被遮挡 */
  overflow: hidden;
  margin-bottom: 24rpx;
  transition: all 0.2s ease; /* 确保过渡平滑 */
}

/* 仪表盘卡片点击态：浅绿光晕反馈 */
.dashboard-card:active {
  transform: scale(0.98);
  /* 背景变实，增加触感 */
  background: rgba(255, 255, 255, 0.95) !important; 
  /* 边框变为清新薄荷绿 */
  border-color: #6EE7B7 !important; 
  /* 添加浅绿色外发光 (Glow) */
  box-shadow: 0 0 0 6rpx rgba(110, 231, 183, 0.25) !important; 
}

/* 动态光晕层 - 状态感知型呼吸光晕 */
.dashboard-glow {
  position: absolute;
  top: -20%;
  left: -20%;
  width: 140%;
  height: 140%;
  z-index: 0; /* 放在最底层 */
  filter: blur(80rpx); /* 增加模糊半径，使光更散 */
  opacity: 0.25; /* 降低不透明度 (原0.35)，拒绝浓郁 */
  transition: background 1s ease;
  pointer-events: none;
}

/* ============ 强制统一仪表盘光晕 ============ */
/* 无论什么状态，都使用统一的"晨曦光晕"，防止卡片变黄/变红 */
.dashboard-card .dashboard-glow,
.dashboard-card.status-green .dashboard-glow,
.dashboard-card.status-yellow .dashboard-glow,
.dashboard-card.status-red .dashboard-glow {
  /* 方案 A: 晨曦暖白 (推荐，通透感最强) */
  background: radial-gradient(circle at 50% 30%, rgba(255, 237, 213, 0.6) 0%, transparent 70%) !important;
  
  /* 方案 B (备选): 如果你想要冷色调，可以用这个淡绿 */
  /* background: radial-gradient(circle at 50% 30%, rgba(167, 243, 208, 0.4) 0%, transparent 70%) !important; */
  
  /* 确保过渡平滑 */
  transition: background 1s ease;
}

/* 清理可能存在的额外装饰层 - 隐藏伪元素以保持干净 */
.dashboard-card::before,
.dashboard-card::after {
  display: none;
}

.dashboard-content {
  padding: 32rpx;
  position: relative;
  z-index: 10; /* 确保内容在光晕之上 */
}

/* 热量仪表盘 */
.calories-dashboard {
  display: flex;
  align-items: center;
  gap: 32rpx;
  margin-bottom: 32rpx;
}

/* ============ 高级液态球体 - 3D 玻璃效果 ============ */
.liquid-sphere {
  position: relative;
  width: 280rpx;
  height: 280rpx;
  border-radius: 50%;

  /* 3D 玻璃球体基础 - 深色底部模拟深度 */
  background:
    /* 顶部高光 */
    radial-gradient(
      ellipse 60% 40% at 30% 20%,
      rgba(255, 255, 255, 0.6) 0%,
      transparent 50%
    ),
    /* 中心透明区域 */
    radial-gradient(
      circle at 50% 50%,
      rgba(255, 255, 255, 0.05) 0%,
      rgba(255, 255, 255, 0.02) 40%,
      rgba(0, 0, 0, 0.03) 70%,
      rgba(0, 0, 0, 0.08) 100%
    );

  /* 修改 box-shadow: 去除橙色，改为通用的高质感灰调投影 */
  box-shadow:
    /* 1. 主悬浮影：深灰色，模拟物体遮挡光线 */
    0 30rpx 60rpx rgba(0, 0, 0, 0.12),
    /* 2. 次级层次影：浅灰色，增加贴地感 */
    0 15rpx 30rpx rgba(0, 0, 0, 0.08),
    /* 3. 内部体积影：保持不变，增加球体厚度感 */
    inset 0 -20rpx 40rpx rgba(0, 0, 0, 0.1),
    inset 0 20rpx 40rpx rgba(255, 255, 255, 0.4),
    /* 4. 边缘光：纯白光晕，去除原来的暖色光 */
    0 0 0 1rpx rgba(255, 255, 255, 0.4),
    0 0 40rpx rgba(255, 255, 255, 0.2) !important;

  overflow: hidden;
  z-index: 1;

  /* 添加轻微动画让球体有呼吸感 */
  animation: sphere-breathe 4s ease-in-out infinite;
}

@keyframes sphere-breathe {
  0%, 100% {
    box-shadow:
      0 30rpx 60rpx rgba(0, 0, 0, 0.12), /* 主悬浮影 */
      0 15rpx 30rpx rgba(0, 0, 0, 0.08), /* 次级层次影 */
      inset 0 -20rpx 40rpx rgba(0, 0, 0, 0.1), /* 内部体积暗部 */
      inset 0 20rpx 40rpx rgba(255, 255, 255, 0.4), /* 内部高光 */
      0 0 0 1rpx rgba(255, 255, 255, 0.4), /* 边缘光 */
      0 0 40rpx rgba(255, 255, 255, 0.2); /* 边缘光晕 */
  }
  50% {
    box-shadow:
      0 35rpx 70rpx rgba(0, 0, 0, 0.14), /* 主悬浮影增强 */
      0 18rpx 35rpx rgba(0, 0, 0, 0.1), /* 次级层次影增强 */
      inset 0 -20rpx 40rpx rgba(0, 0, 0, 0.12), /* 内部体积暗部 */
      inset 0 20rpx 40rpx rgba(255, 255, 255, 0.45), /* 内部高光增强 */
      0 0 0 1rpx rgba(255, 255, 255, 0.45), /* 边缘光增强 */
      0 0 50rpx rgba(255, 255, 255, 0.25); /* 边缘光晕增强 */
  }
}

/* 主高光点 - 左上角椭圆形 */
.liquid-sphere::before {
  content: '';
  position: absolute;
  top: 8%;
  left: 12%;
  width: 35%;
  height: 20%;
  border-radius: 50%;
  background: radial-gradient(
    ellipse at 50% 50%,
    rgba(255, 255, 255, 0.95) 0%,
    rgba(255, 255, 255, 0.6) 30%,
    transparent 70%
  );
  transform: rotate(-30deg);
  z-index: 30;
  filter: blur(1rpx);
  animation: highlight-shimmer 3s ease-in-out infinite;
}

@keyframes highlight-shimmer {
  0%, 100% {
    opacity: 0.9;
    transform: rotate(-30deg) scale(1);
  }
  50% {
    opacity: 1;
    transform: rotate(-30deg) scale(1.05);
  }
}

/* 次高光 - 边缘反射 */
.liquid-sphere::after {
  content: '';
  position: absolute;
  bottom: 10%;
  right: 8%;
  width: 15%;
  height: 25%;
  border-radius: 50%;
  background: radial-gradient(
    ellipse at 50% 50%,
    rgba(255, 255, 255, 0.3) 0%,
    transparent 70%
  );
  z-index: 30;
  filter: blur(3rpx);
}

/* 液体容器 - 圆形裁切 */
.liquid-container {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  overflow: hidden;
  z-index: 2;
}

/* 液体主体 - 统一的单层液体 - 芦荟/薄荷质感渐变 */
.liquid-fluid {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  /* Height controlled by JS */
  /* 清新的薄荷绿 -> 嫩草绿，类似芦荟汁质感 */
  background: linear-gradient(180deg, rgba(110, 231, 183, 0.85) 0%, rgba(209, 250, 229, 0.6) 100%);
  transition: height 1s cubic-bezier(0.4, 0, 0.2, 1);
}

/* 移除伪元素波浪，使用子元素代替 */
.liquid-fluid::before,
.liquid-fluid::after {
  display: none;
}

/* ============ 波浪表面层 ============ */
.wave-layer {
  position: absolute;
  left: -50%;
  width: 200%;
}

/* 波浪层 1 - 底层波浪（后波浪，更淡的薄荷绿，作为层次衬托） */
.wave-layer.wave-1 {
  height: 60rpx;
  top: -30rpx;
  background: linear-gradient(180deg, rgba(110, 231, 183, 0.3) 0%, rgba(236, 253, 245, 0.1) 100%);
  border-radius: 43% 57% 44% 56%;
  animation: wave-sway-1 3.5s ease-in-out infinite;
  z-index: 1;
}

/* 波浪层 2 - 中层波浪（后波浪，更淡的薄荷绿，作为层次衬托） */
.wave-layer.wave-2 {
  height: 50rpx;
  top: -25rpx;
  background: linear-gradient(180deg, rgba(110, 231, 183, 0.3) 0%, rgba(236, 253, 245, 0.1) 100%);
  border-radius: 57% 43% 56% 44%;
  animation: wave-sway-2 3s ease-in-out infinite;
  z-index: 2;
}

/* 波浪层 3 - 表面波浪（前波浪，清新的薄荷绿 -> 嫩草绿） */
.wave-layer.wave-3 {
  height: 40rpx;
  top: -20rpx;
  background: linear-gradient(180deg, rgba(110, 231, 183, 0.85) 0%, rgba(209, 250, 229, 0.6) 100%);
  border-radius: 45% 55% 48% 52%;
  animation: wave-sway-3 2.5s ease-in-out infinite;
  z-index: 3;
}

/* 波浪动画 1 */
@keyframes wave-sway-1 {
  0%, 100% {
    transform: translateX(0);
    border-radius: 40% 60% 38% 62%;
  }
  50% {
    transform: translateX(35%);
    border-radius: 60% 40% 62% 38%;
  }
}

/* 波浪动画 2 - 反向 */
@keyframes wave-sway-2 {
  0%, 100% {
    transform: translateX(0);
    border-radius: 60% 40% 58% 42%;
  }
  50% {
    transform: translateX(-35%);
    border-radius: 40% 60% 42% 58%;
  }
}

/* 波浪动画 3 - 更快 */
@keyframes wave-sway-3 {
  0%, 100% {
    transform: translateX(0);
    border-radius: 42% 58% 45% 55%;
  }
  25% {
    transform: translateX(20%);
    border-radius: 55% 45% 58% 42%;
  }
  50% {
    transform: translateX(0);
    border-radius: 58% 42% 55% 45%;
  }
  75% {
    transform: translateX(-20%);
    border-radius: 45% 55% 42% 58%;
  }
}

/* 液体内部高光 - 漂浮感 */
.liquid-highlight {
  position: absolute;
  top: 20%;
  left: 15%;
  width: 45%;
  height: 35%;
  background: radial-gradient(
    ellipse at 40% 40%,
    rgba(255, 255, 255, 0.4) 0%,
    rgba(255, 255, 255, 0.15) 50%,
    transparent 70%
  );
  border-radius: 50%;
  z-index: 10;
  animation: highlight-drift 4s ease-in-out infinite;
}

@keyframes highlight-drift {
  0%, 100% {
    transform: translate(0, 0);
    opacity: 0.6;
  }
  50% {
    transform: translate(8%, 12%);
    opacity: 0.9;
  }
}

/* 球体内部光晕 */
.sphere-inner-glow {
  position: absolute;
  top: 5%;
  left: 5%;
  right: 5%;
  bottom: 5%;
  border-radius: 50%;
  background: radial-gradient(
    ellipse 80% 60% at 35% 25%,
    rgba(255, 255, 255, 0.15) 0%,
    transparent 50%
  );
  z-index: 25;
  pointer-events: none;
}

/* 球体边缘光泽 */
.sphere-rim-light {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: 50%;
  background: transparent;
  border: 2rpx solid transparent;
  box-shadow:
    inset 0 0 30rpx rgba(255, 255, 255, 0.2),
    inset 0 -30rpx 60rpx rgba(0, 0, 0, 0.05);
  z-index: 28;
  pointer-events: none;

  /* 边缘渐变光泽 */
  background-image: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.3) 0%,
    transparent 40%,
    transparent 60%,
    rgba(255, 255, 255, 0.1) 100%
  );
  mask: radial-gradient(
    circle,
    transparent 85%,
    black 100%
  );
  -webkit-mask: radial-gradient(
    circle,
    transparent 85%,
    black 100%
  );
}

/* Center Content */
.donut-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  z-index: 50;
}

.donut-value-wrapper {
  display: flex;
  align-items: baseline;
  gap: 4rpx;
  justify-content: center;
}

/* 核心数字颜色回归 - 对齐首页 (#1E293B) */
.donut-value {
  font-size: 56rpx;
  font-weight: 500;
  color: #1E293B !important; /* Slate-800 */
  font-family: 'SF Mono', 'Menlo', monospace;
  line-height: 1;
  text-shadow: none; /* 移除之前的立体投影，保持扁平干净 */
}

.donut-unit {
  font-size: 20rpx;
  color: #94A3B8 !important; /* Slate-400 */
  font-weight: 500;
  line-height: 1;
  text-shadow:
    0 1rpx 2rpx rgba(255, 255, 255, 1),
    0 0 10rpx rgba(255, 255, 255, 0.8);
}

.donut-label {
  font-size: 22rpx;
  color: #94A3B8 !important; /* Slate-400 */
  margin-top: 4rpx;
  font-weight: 500;
  text-shadow:
    0 1rpx 2rpx rgba(255, 255, 255, 1),
    0 0 10rpx rgba(255, 255, 255, 0.8);
}

/* 热量详细数据 */
.calories-details {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 20rpx;
}

.calorie-row {
  display: flex;
  align-items: center;
  gap: 16rpx;
  padding: 16rpx 20rpx;
  background: rgba(255, 255, 255, 0.5);
  backdrop-filter: blur(10rpx);
  -webkit-backdrop-filter: blur(10rpx);
  border: 1rpx solid rgba(255, 255, 255, 0.6);
  border-radius: 16rpx;
  transition: all 0.2s ease;
  box-shadow: 0 2rpx 8rpx rgba(148, 163, 184, 0.03);
}

.calorie-row:active {
  background: rgba(255, 255, 255, 0.7);
  transform: scale(0.98);
}

.calorie-indicator {
  width: 20rpx;
  height: 20rpx;
  border-radius: 50%;
  box-shadow: 0 0 8rpx currentColor;
}

.calorie-indicator.in {
  background: #6EE7B7 !important; /* Pastel Emerald */
  box-shadow: 0 0 10rpx rgba(110, 231, 183, 0.4) !important;
}

.calorie-indicator.out {
  background: linear-gradient(135deg, #42A5F5 0%, #64B5F6 100%);
  box-shadow: 0 0 10rpx rgba(66, 165, 245, 0.5);
}

.calorie-indicator.goal-ind {
  background: linear-gradient(135deg, #E5E7EB 0%, #D1D5DB 100%);
  box-shadow: 0 0 8rpx rgba(209, 213, 219, 0.5);
}

.calorie-label {
  font-size: 30rpx;
  color: #334155; /* Slate-700 */
  flex: 1;
  font-weight: 500;
}

.calorie-value-wrapper {
  display: flex;
  align-items: baseline;
  gap: 4rpx;
}

.calorie-value {
  font-size: 34rpx;
  font-weight: 300;
  color: #334155; /* Slate-700 */
  font-family: 'SF Mono', 'Menlo', monospace;
}

.calorie-unit {
  font-size: 20rpx;
  color: #94A3B8 !important; /* Slate-400 */
  font-weight: 400;
}

/* 宏量营养素 */
.macros-section {
  display: flex;
  flex-direction: column;
  gap: 20rpx;
  padding-top: 24rpx;
  border-top: 1rpx solid rgba(0, 0, 0, 0.04);
}

.macro-bar {
  display: flex;
  flex-direction: column;
  gap: 8rpx;
}

.macro-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.macro-name {
  font-size: 28rpx;
  color: #334155; /* Slate-700 */
  font-weight: 500;
}

.macro-values {
  font-size: 26rpx;
  color: #94A3B8 !important; /* Slate-400 */
  font-family: 'SF Mono', 'Menlo', monospace;
  font-weight: 400;
}

.macro-progress-bg {
  height: 20rpx;
  background: rgba(243, 244, 246, 0.8);
  border-radius: 10rpx;
  overflow: hidden;
  position: relative;
  box-shadow: inset 0 2rpx 4rpx rgba(0, 0, 0, 0.06);
}

.macro-progress-fill {
  height: 100%;
  border-radius: 10rpx;
  transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

/* 液态波浪效果 */
.macro-progress-fill::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -10%;
  width: 120%;
  height: 200%;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.4) 50%,
    transparent 100%
  );
  animation: liquid-wave 2s ease-in-out infinite;
}

/* 光泽扫过效果 */
.macro-progress-fill::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 50%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.6) 50%,
    transparent 100%
  );
  animation: shine-sweep 3s ease-in-out infinite;
}

@keyframes liquid-wave {
  0%, 100% {
    transform: translateX(-5%) rotate(-2deg);
  }
  50% {
    transform: translateX(5%) rotate(2deg);
  }
}

@keyframes shine-sweep {
  0% {
    left: -100%;
    opacity: 0;
  }
  20% {
    opacity: 1;
  }
  80% {
    opacity: 1;
  }
  100% {
    left: 200%;
    opacity: 0;
  }
}

.macro-progress-fill.carbs {
  background: #FDE047 !important; /* Pastel Yellow */
  box-shadow: 0 0 10rpx rgba(253, 224, 71, 0.4) !important;
  background-size: 200% 100%;
  animation: liquid-flow 3s ease-in-out infinite;
}

.macro-progress-fill.protein {
  background: #6EE7B7 !important; /* Pastel Emerald */
  box-shadow: 0 0 10rpx rgba(110, 231, 183, 0.4) !important;
  background-size: 200% 100%;
  animation: liquid-flow 3s ease-in-out infinite;
}

.macro-progress-fill.fat {
  background: #FCA5A5 !important; /* Pastel Coral */
  box-shadow: 0 0 10rpx rgba(252, 165, 165, 0.4) !important;
  background-size: 200% 100%;
  animation: liquid-flow 3s ease-in-out infinite;
}

@keyframes liquid-flow {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

/* ============ 时间线区域 ============ */
.timeline-section {
  margin-top: 0;
}

.section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 24rpx;
  padding: 0 8rpx;
  position: relative;
  z-index: 20;
}

.section-title {
  font-size: 36rpx;
  font-weight: 600;
  color: #334155; /* Slate-700 */
}

.header-right {
  display: flex;
  align-items: center;
  gap: 16rpx;
  position: relative;
  z-index: 21;
}

/* 编辑按钮 */
.edit-btn {
  padding: 12rpx 24rpx;
  background: rgba(255, 255, 255, 0.8);
  border-radius: 16rpx;
  font-size: 24rpx;
  color: #6B7280;
  font-weight: 500;
  transition: all 0.3s ease;
  position: relative;
  z-index: 22;
}

.edit-btn.active {
  background: linear-gradient(135deg, #FF6B35 0%, #FF8E53 100%);
  color: #fff;
  box-shadow: 0 4rpx 12rpx rgba(255, 107, 53, 0.3);
}

.edit-btn:active {
  transform: scale(0.95);
}

.date-badge {
  display: flex;
  align-items: center;
  gap: 8rpx;
  padding: 12rpx 20rpx;
  background: rgba(255, 255, 255, 0.8);
  border-radius: 20rpx;
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.04);
}

.date-badge text {
  font-size: 24rpx;
  color: #6B7280;
}

.date-arrow {
  color: #9CA3AF;
  font-size: 28rpx;
}

/* 时间线容器 */
.timeline-container {
  display: flex;
  flex-direction: column;
  padding: 0 16rpx;
}

.timeline-item {
  display: flex;
  gap: 16rpx;
}

/* 时间线轨道 */
.timeline-track {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 56rpx;
  flex-shrink: 0;
}

/* 1. 玻璃外壳 (容器) */
.timeline-dot {
  width: 64rpx;
  height: 64rpx;
  border-radius: 50%;
  
  /* 极简玻璃质感 */
  background: rgba(255, 255, 255, 0.4);
  backdrop-filter: blur(12rpx);
  -webkit-backdrop-filter: blur(12rpx);
  border: 1rpx solid rgba(255, 255, 255, 0.8);
  
  /* 物理阴影 */
  box-shadow: 
    0 8rpx 20rpx rgba(148, 163, 184, 0.1),
    inset 0 2rpx 4rpx rgba(255, 255, 255, 0.9);
    
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2;
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* 弹性动效 */
}

/* 3. 激活状态：点亮光能 */
.timeline-dot.active {
  background: rgba(255, 255, 255, 0.8);
  border-color: #ffffff;
  transform: scale(1.1); /* 激活时外壳微涨 */
}

/* 2. 能量内核 (原 Emoji 节点重塑) */
.dot-icon {
  /* 关键：隐藏原本的 Emoji 文字 */
  font-size: 0 !important; 
  
  /* 重塑为几何圆点 */
  width: 16rpx;
  height: 16rpx;
  border-radius: 50%;
  
  /* 默认状态：哑光银灰金属 */
  background: #CBD5E1; 
  box-shadow: inset 0 -2rpx 4rpx rgba(0,0,0,0.1);
  transition: all 0.4s ease;
}

.timeline-dot.active .dot-icon {
  /* 激活内核：高亮薄荷绿 + 强光晕 */
  background: #6EE7B7; 
  width: 20rpx; /* 内核微涨 */
  height: 20rpx;
  
  /* 核心光效：多层光晕模拟发光 */
  box-shadow: 
    0 0 0 4rpx rgba(110, 231, 183, 0.3), /* 内光环 */
    0 0 20rpx rgba(16, 185, 129, 0.6);   /* 外漫射 */
}

/* 4. 连接线微调 */
.timeline-line {
  width: 2rpx;
  flex: 1;
  min-height: 40rpx;
  background: rgba(203, 213, 225, 0.4); /* 极淡的连接线，不抢戏 */
  margin: 8rpx 0;
}

/* 餐次卡片容器 */
.meal-card-wrapper {
  flex: 1;
  margin-bottom: 20rpx;
}

/* 旧样式已移除，统一使用上方的纯净白玻璃风格 */

/* 清除餐次卡片的特殊色 (覆盖 .breakfast, .lunch 等的旧样式) */
.meal-card.breakfast,
.meal-card.lunch,
.meal-card.dinner,
.meal-card.snack {
  /* 强制去除之前的颜色阴影/边框，保持纯净 */
  box-shadow: 
    0 20rpx 40rpx rgba(148, 163, 184, 0.05),
    inset 0 0 0 1rpx rgba(255, 255, 255, 0.5) !important;
  border-color: rgba(255, 255, 255, 0.8) !important;
  background: rgba(255, 255, 255, 0.6) !important;
}

.meal-card.has-data {
  /* 有数据时保持相同样式 */
  box-shadow: 
    0 20rpx 40rpx rgba(148, 163, 184, 0.05),
    inset 0 0 0 1rpx rgba(255, 255, 255, 0.5) !important;
}

/* 修复卡片点击态：纯白 -> 浅绿光晕 */
.meal-card:active {
  transform: scale(0.98);
  /* 背景变实，增加触感 */
  background: rgba(255, 255, 255, 0.95) !important; 
  /* 边框变为清新薄荷绿 */
  border-color: #6EE7B7 !important; 
  /* 添加浅绿色外发光 (Glow) */
  box-shadow: 0 0 0 6rpx rgba(110, 231, 183, 0.25) !important; 
}

.meal-card-content {
  padding: 24rpx;
}

/* 餐次头部 */
.meal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16rpx;
}

.meal-title-group {
  display: flex;
  flex-direction: column;
  gap: 4rpx;
}

.meal-title {
  font-size: 30rpx;
  font-weight: 600; /* 保持加粗 */
  color: #334155; /* Slate-700 */
  letter-spacing: 1rpx;
}

.meal-time {
  font-size: 22rpx;
  color: #64748B !important; /* Slate-500，加深一级 */
  font-weight: 400; /* 避免使用极细体 */
}

.meal-calories {
  display: flex;
  align-items: baseline;
  gap: 4rpx;
}

.cal-number {
  font-size: 36rpx;
  font-weight: 500; /* 适当增加字重，防止笔画过细 */
  color: #059669 !important; /* Emerald-600，加深颜色以提升对比度 */
  font-family: 'SF Mono', 'Menlo', monospace;
  /* 保留一点点文字阴影增加立体感，但要克制 */
  text-shadow: 0 2rpx 8rpx rgba(5, 150, 105, 0.15);
}

.cal-unit {
  font-size: 20rpx;
  color: #64748B !important; /* Slate-500，加深一级 */
  font-weight: 400; /* 避免使用极细体 */
}

/* 添加按钮 */
.add-meal-btn {
  width: 56rpx;
  height: 56rpx;
  background: linear-gradient(135deg, #FF6B35 0%, #FF8E53 100%);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 8rpx 24rpx rgba(255, 107, 53, 0.35);
  transition: all 0.2s ease;
}

.add-meal-btn:active {
  transform: scale(0.9);
}

.add-icon {
  font-size: 36rpx;
  color: #FFFFFF;
  font-weight: 300;
  line-height: 1;
}

/* 进度条 */
.meal-progress-wrapper {
  display: flex;
  align-items: center;
  gap: 16rpx;
  margin-bottom: 16rpx;
}

.meal-progress-bar {
  flex: 1;
  height: 16rpx;
  background: rgba(243, 244, 246, 0.8);
  border-radius: 8rpx;
  overflow: hidden;
  position: relative;
  box-shadow: inset 0 2rpx 4rpx rgba(0, 0, 0, 0.06);
}

.meal-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #FDBA74 0%, #FB923C 100%); /* Pastel Orange */
  border-radius: 8rpx;
  transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  animation: liquid-flow 3s ease-in-out infinite;
  box-shadow: 0 0 10rpx rgba(253, 186, 116, 0.4), inset 0 2rpx 4rpx rgba(255, 255, 255, 0.3);
}

/* 液态波浪效果 */
.meal-progress-fill::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -10%;
  width: 120%;
  height: 200%;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.35) 50%,
    transparent 100%
  );
  animation: liquid-wave 2s ease-in-out infinite;
}

/* 光泽扫过效果 */
.meal-progress-fill::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 50%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.5) 50%,
    transparent 100%
  );
  animation: shine-sweep 3s ease-in-out infinite;
}

.meal-progress-fill.over {
  background: #FCA5A5 !important; /* Pastel Coral */
  box-shadow: 0 0 10rpx rgba(252, 165, 165, 0.4) !important;
  background-size: 200% 100%;
}

.meal-progress-text {
  font-size: 22rpx;
  color: #9CA3AF;
  font-weight: 600;
  min-width: 60rpx;
  text-align: right;
}

/* 食物列表 */
.food-items {
  padding-top: 16rpx;
  border-top: 1rpx solid rgba(0, 0, 0, 0.04);
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* 左滑删除容器 */
.food-item-wrapper {
  position: relative;
  overflow: hidden;
  margin-bottom: 8rpx;
  width: 100%;
}

.food-item {
  display: flex;
  align-items: center;
  padding: 16rpx 0;
  transition: transform 0.3s ease, background 0.2s ease;
  background: transparent;
  position: relative;
}

.food-item.swiped {
  transform: translateX(-160rpx);
}

/* 左滑删除按钮 */
.swipe-delete-btn {
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  width: 160rpx;
  background: #FCA5A5 !important; /* Pastel Coral */
  box-shadow: 0 0 10rpx rgba(252, 165, 165, 0.4) !important;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  font-size: 28rpx;
  font-weight: 600;
  transform: translateX(100%);
  transition: transform 0.3s ease;
}

.food-item.swiped + .swipe-delete-btn {
  transform: translateX(0);
}

/* 编辑模式选择框 */
.food-checkbox {
  width: 0;
  overflow: hidden;
  transition: width 0.3s ease, margin 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.food-checkbox.show {
  width: 56rpx;
  margin-right: 16rpx;
}

.checkbox-inner {
  width: 44rpx;
  height: 44rpx;
  border: 3rpx solid #D1D5DB;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  background: #fff;
}

.checkbox-inner.checked {
  background: linear-gradient(135deg, #FF6B35 0%, #FF8E53 100%);
  border-color: #FF6B35;
  box-shadow: 0 4rpx 12rpx rgba(255, 107, 53, 0.3);
}

.checkbox-inner.checked text {
  color: #fff;
  font-size: 24rpx;
  font-weight: 700;
}

.food-item:active {
  background: rgba(255, 255, 255, 0.3);
  margin: 0 -16rpx;
  padding: 16rpx;
  border-radius: 12rpx;
}

.food-left {
  display: flex;
  align-items: center;
  gap: 16rpx;
  flex: 1;
}

.food-emoji {
  width: 72rpx;
  height: 72rpx;
  /* 柔和的渐变容器，代替原来的纯色背景 */
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(248, 250, 252, 0.8) 100%);
  border: 1rpx solid rgba(255, 255, 255, 0.6);
  border-radius: 24rpx; /* 方圆形 (Squircle) 更现代 */
  
  display: flex;
  align-items: center;
  justify-content: center;
  
  font-size: 40rpx;
  box-shadow: 0 4rpx 12rpx rgba(148, 163, 184, 0.08); /* 轻微浮起 */
}

.food-info {
  display: flex;
  flex-direction: column;
  gap: 4rpx;
}

.food-name {
  font-size: 28rpx;
  font-weight: 500;
  color: #334155; /* Slate-700 */
}

.food-portion {
  font-size: 22rpx;
  color: #94A3B8 !important; /* Slate-400 */
}

.food-right {
  display: flex;
  align-items: baseline;
  gap: 4rpx;
}

.food-cal {
  font-size: 28rpx;
  font-weight: 300;
  color: #334155; /* Slate-700 */
  font-family: 'SF Mono', 'Menlo', monospace;
}

.food-cal-unit {
  font-size: 20rpx;
  color: #94A3B8 !important; /* Slate-400 */
}

/* 添加更多 */
.add-more-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12rpx;
  padding: 20rpx 40rpx;
  margin-top: 8rpx;
  background: linear-gradient(135deg, rgba(255, 107, 53, 0.1) 0%, rgba(255, 142, 83, 0.1) 100%);
  border-radius: 24rpx;
  border: 2rpx dashed rgba(255, 107, 53, 0.3);
}

.add-more-icon {
  width: 32rpx;
  height: 32rpx;
  background: rgba(255, 107, 53, 0.1);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24rpx;
  color: #FF6B35;
  line-height: 32rpx;
  text-align: center;
}

.add-more-text {
  font-size: 26rpx;
  color: #FF6B35;
  font-weight: 500;
}

.add-more-row:active {
  opacity: 0.7;
}

/* 空状态 */
.empty-hint {
  padding: 16rpx 0;
}

.empty-hint text {
  font-size: 24rpx;
  color: #D1D5DB;
  font-style: italic;
}

/* ============ 底部间距 ============ */
.bottom-spacer {
  height: 160rpx;
}

/* ============ 加载遮罩 ============ */
.loading-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(243, 246, 248, 0.9);
  backdrop-filter: blur(20rpx);
  -webkit-backdrop-filter: blur(20rpx);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999;
}

.loading-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20rpx;
}

.loading-spinner {
  width: 64rpx;
  height: 64rpx;
  border: 6rpx solid rgba(255, 107, 53, 0.2);
  border-top-color: #FF6B35;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.loading-text {
  font-size: 26rpx;
  color: #6B7280;
}

/* ============ 动画 ============ */
@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(20rpx);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in-up {
  animation: fade-in-up 0.4s ease-out;
}

/* ============ 折叠相关样式 ============ */
.meal-right-section {
  display: flex;
  align-items: center;
  gap: 16rpx;
}

/* 单餐编辑按钮 */
.meal-edit-btn {
  padding: 8rpx 20rpx;
  background: rgba(243, 244, 246, 0.8);
  border-radius: 12rpx;
  font-size: 22rpx;
  color: #9CA3AF;
  font-weight: 500;
  transition: all 0.3s ease;
}

.meal-edit-btn.active {
  background: linear-gradient(135deg, #FF6B35 0%, #FF8E53 100%);
  color: #fff;
  box-shadow: 0 4rpx 12rpx rgba(255, 107, 53, 0.3);
}

.meal-edit-btn:active {
  transform: scale(0.95);
}

.collapse-icon {
  width: 40rpx;
  height: 40rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #9CA3AF;
  font-size: 20rpx;
  transition: transform 0.3s ease;
}

.collapse-icon.collapsed {
  transform: rotate(-90deg);
}

/* 可折叠内容区域 */
.collapsible-content {
  max-height: 3000rpx;
  overflow: hidden;
  transition: max-height 0.3s ease, opacity 0.3s ease;
  opacity: 1;
}

.collapsible-content.collapsed {
  max-height: 0;
  opacity: 0;
}

/* 空状态优化 */
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 32rpx 0;
  gap: 20rpx;
}

.empty-hint {
  font-size: 24rpx;
  color: #D1D5DB;
  font-style: italic;
}

.add-meal-btn-large {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12rpx;
  padding: 20rpx 40rpx;
  background: linear-gradient(135deg, rgba(255, 107, 53, 0.1) 0%, rgba(255, 142, 83, 0.1) 100%);
  border-radius: 24rpx;
  border: 2rpx dashed rgba(255, 107, 53, 0.3);
}

.add-meal-btn-large .add-icon {
  font-size: 32rpx;
  color: #FF6B35;
  font-weight: 500;
}

.add-meal-btn-large .add-text {
  font-size: 28rpx;
  color: #FF6B35;
  font-weight: 500;
}

.add-meal-btn-large:active {
  opacity: 0.7;
  transform: scale(0.98);
}

/* 日历图标 */
.calendar-icon {
  font-size: 28rpx;
}

/* ============ 日历弹窗样式 ============ */
.calendar-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 1000;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease, visibility 0.3s ease;
}

.calendar-modal.show {
  opacity: 1;
  visibility: visible;
}

.calendar-content {
  width: 100%;
  max-width: 750rpx;
  background: #FFFFFF;
  border-radius: 40rpx 40rpx 0 0;
  padding: 32rpx;
  padding-bottom: calc(32rpx + env(safe-area-inset-bottom));
  transform: translateY(100%);
  transition: transform 0.3s ease;
}

.calendar-modal.show .calendar-content {
  transform: translateY(0);
}

/* 日历头部 */
.calendar-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 24rpx;
}

.calendar-nav {
  width: 64rpx;
  height: 64rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #F3F4F6;
  border-radius: 50%;
  font-size: 40rpx;
  color: #374151;
}

.calendar-nav:active {
  background: #E5E7EB;
}

.calendar-title {
  font-size: 32rpx;
  font-weight: 600;
  color: #2c3e50;
}

/* 星期标题 */
.calendar-weekdays {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  margin-bottom: 16rpx;
}

.weekday {
  text-align: center;
  font-size: 24rpx;
  color: #9CA3AF;
  font-weight: 500;
  padding: 12rpx 0;
}

/* 日期网格 */
.calendar-days {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 8rpx;
}

.calendar-day {
  position: relative;
  aspect-ratio: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: all 0.2s ease;
}

.calendar-day:active {
  background: #F3F4F6;
}

.day-number {
  font-size: 28rpx;
  font-weight: 400;
  color: #2c3e50;
}

/* 非当前月日期 */
.calendar-day.other-month .day-number {
  color: #D1D5DB;
}

/* 今天 */
.calendar-day.today {
  background: rgba(102, 187, 106, 0.1);
}

.calendar-day.today .day-number {
  color: #66BB6A;
  font-weight: 600;
}

/* 选中日期 */
.calendar-day.selected {
  background: linear-gradient(135deg, #66BB6A 0%, #81C784 100%);
}

.calendar-day.selected .day-number {
  color: #FFFFFF;
  font-weight: 600;
}

.calendar-day.selected .record-dot {
  background: #FFFFFF;
}

/* 未来日期 */
.calendar-day.future {
  opacity: 0.4;
}

.calendar-day.future .day-number {
  color: #D1D5DB;
}

/* 有记录的日期标记 */
.record-dot {
  position: absolute;
  bottom: 8rpx;
  width: 8rpx;
  height: 8rpx;
  background: #6EE7B7 !important; /* Pastel Emerald */
  box-shadow: 0 0 10rpx rgba(110, 231, 183, 0.4) !important;
  border-radius: 50%;
}

/* 快捷选择按钮 */
.calendar-shortcuts {
  display: flex;
  justify-content: center;
  gap: 24rpx;
  margin-top: 24rpx;
  padding-top: 24rpx;
  border-top: 1rpx solid #F3F4F6;
}

.shortcut-btn {
  padding: 16rpx 32rpx;
  background: #F9FAFB;
  border-radius: 24rpx;
  font-size: 26rpx;
  color: #6B7280;
  font-weight: 500;
  transition: all 0.2s ease;
}

.shortcut-btn:active {
  background: #66BB6A;
  color: #FFFFFF;
}

/* ============ 批量操作栏 ============ */
.batch-action-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20rpx);
  -webkit-backdrop-filter: blur(20rpx);
  padding: 24rpx 32rpx;
  padding-bottom: calc(24rpx + env(safe-area-inset-bottom));
  display: flex;
  align-items: center;
  justify-content: space-between;
  box-shadow: 0 -8rpx 32rpx rgba(0, 0, 0, 0.08);
  transform: translateY(100%);
  transition: transform 0.3s ease;
  z-index: 100;
}

.batch-action-bar.show {
  transform: translateY(0);
}

.batch-info {
  display: flex;
  flex-direction: column;
  gap: 4rpx;
}

.selected-count {
  font-size: 30rpx;
  font-weight: 600;
  color: #2c3e50;
}

.selected-calories {
  font-size: 24rpx;
  color: #909399;
}

.batch-actions {
  display: flex;
  align-items: center;
  gap: 16rpx;
}

.batch-btn {
  padding: 20rpx 32rpx;
  border-radius: 20rpx;
  font-size: 28rpx;
  font-weight: 600;
  transition: all 0.2s ease;
}

.batch-btn.select-all {
  background: rgba(107, 114, 128, 0.1);
  color: #6B7280;
}

.batch-btn.select-all:active {
  background: rgba(107, 114, 128, 0.2);
}

.batch-btn.delete {
  background: linear-gradient(135deg, #FF4D4F 0%, #FF7875 100%);
  color: #fff;
  box-shadow: 0 8rpx 24rpx rgba(255, 77, 79, 0.35);
}

.batch-btn.delete:active {
  transform: scale(0.95);
  box-shadow: 0 4rpx 16rpx rgba(255, 77, 79, 0.25);
}

/* ============ 食物编辑弹窗 ============ */
.food-edit-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 1000;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease, visibility 0.3s ease;
}

.food-edit-modal.show {
  opacity: 1;
  visibility: visible;
}

.food-edit-content {
  width: 100%;
  max-width: 750rpx;
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.98) 0%, rgba(255, 250, 245, 0.98) 100%);
  backdrop-filter: blur(40rpx);
  -webkit-backdrop-filter: blur(40rpx);
  border-radius: 40rpx 40rpx 0 0;
  padding: 32rpx;
  padding-bottom: calc(32rpx + env(safe-area-inset-bottom));
  transform: translateY(100%);
  transition: transform 0.3s ease;
  box-shadow: 0 -16rpx 48rpx rgba(0, 0, 0, 0.15);
}

.food-edit-modal.show .food-edit-content {
  transform: translateY(0);
}

/* 弹窗头部 */
.food-edit-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 24rpx;
  padding-bottom: 20rpx;
  border-bottom: 1rpx solid rgba(255, 107, 53, 0.1);
}

.food-edit-title {
  font-size: 36rpx;
  font-weight: 600;
  color: #2c3e50;
}

.food-edit-close {
  width: 56rpx;
  height: 56rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(243, 244, 246, 0.8);
  backdrop-filter: blur(10rpx);
  border-radius: 50%;
  font-size: 36rpx;
  color: #9CA3AF;
  transition: all 0.2s ease;
}

.food-edit-close:active {
  background: rgba(255, 107, 53, 0.1);
  color: #FF6B35;
  transform: scale(0.9);
}

/* 食物信息 - 玻璃效果 */
.food-edit-info {
  display: flex;
  align-items: center;
  gap: 20rpx;
  padding: 24rpx;
  background: linear-gradient(135deg, rgba(255, 247, 237, 0.9) 0%, rgba(255, 237, 213, 0.9) 100%);
  backdrop-filter: blur(20rpx);
  border-radius: 24rpx;
  margin-bottom: 24rpx;
  border: 1rpx solid rgba(255, 107, 53, 0.15);
  box-shadow:
    0 4rpx 16rpx rgba(255, 107, 53, 0.08),
    inset 0 1rpx 0 rgba(255, 255, 255, 0.8);
}

.food-edit-avatar {
  width: 80rpx;
  height: 80rpx;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(10rpx);
  border-radius: 20rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.06);
}

.food-edit-emoji {
  font-size: 40rpx;
}

.food-edit-name {
  font-size: 32rpx;
  font-weight: 600;
  color: #2c3e50;
}

/* 表单区域 */
.food-edit-form {
  margin-bottom: 24rpx;
}

/* 份量显示头部 */
.amount-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24rpx;
}

.amount-display {
  display: flex;
  align-items: baseline;
  background: linear-gradient(135deg, rgba(255, 247, 237, 0.95) 0%, rgba(255, 237, 213, 0.95) 100%);
  backdrop-filter: blur(10rpx);
  padding: 12rpx 24rpx;
  border-radius: 20rpx;
  border: 1rpx solid rgba(255, 107, 53, 0.2);
}

.amount-value {
  font-size: 48rpx;
  font-weight: 300;
  background: linear-gradient(135deg, #66BB6A, #81C784);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.amount-unit-text {
  font-size: 24rpx;
  color: #66BB6A;
  margin-left: 8rpx;
  font-weight: 500;
}

/* 滑动条容器 */
.slider-container {
  position: relative;
  height: 120rpx;
  margin-bottom: 24rpx;
  padding: 0 30rpx;
}

/* 滑动轨道 - 玻璃效果 */
.slider-track {
  position: absolute;
  top: 40rpx;
  left: 30rpx;
  right: 30rpx;
  height: 20rpx;
  background: linear-gradient(180deg, rgba(232, 234, 237, 0.8) 0%, rgba(245, 246, 248, 0.8) 50%, rgba(236, 238, 240, 0.8) 100%);
  backdrop-filter: blur(10rpx);
  border-radius: 10rpx;
  box-shadow: inset 0 2rpx 6rpx rgba(0, 0, 0, 0.1),
              inset 0 -1rpx 3rpx rgba(255, 255, 255, 0.8);
  overflow: hidden;
}

/* 滑动填充 - 渐变 + 动态光效 */
.slider-fill {
  height: 100%;
  background: linear-gradient(90deg, #FBBF24, #FF9040, #FF6B35);
  border-radius: 10rpx;
  box-shadow: 0 2rpx 8rpx rgba(255, 107, 0, 0.4);
  transition: width 0.05s ease-out;
  position: relative;
  overflow: hidden;
}

/* 滑动填充横扫光效 */
.slider-fill::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 60%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.5) 50%,
    transparent 100%
  );
  animation: slider-shine 2s ease-in-out infinite;
}

@keyframes slider-shine {
  0% {
    left: -60%;
  }
  50%, 100% {
    left: 160%;
  }
}

/* 原生滑动条 - 隐藏样式 */
.amount-slider {
  position: absolute;
  top: 20rpx;
  left: 0;
  right: 0;
  width: 100%;
  margin: 0;
  z-index: 10;
}

/* 自定义滑块 */
.slider-thumb {
  position: absolute;
  top: 16rpx;
  transform: translateX(-50%);
  z-index: 5;
  pointer-events: none;
  transition: left 0.05s ease-out;
}

.thumb-icon {
  width: 72rpx;
  height: 72rpx;
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.98) 0%, rgba(248, 248, 248, 0.98) 100%);
  backdrop-filter: blur(10rpx);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 36rpx;
  box-shadow: 0 6rpx 20rpx rgba(255, 107, 0, 0.3),
              0 2rpx 8rpx rgba(0, 0, 0, 0.1),
              inset 0 2rpx 4rpx rgba(255, 255, 255, 0.9);
  border: 4rpx solid #FF8C42;
  animation: thumbPulse 2s ease-in-out infinite;
}

@keyframes thumbPulse {
  0%, 100% {
    box-shadow: 0 6rpx 20rpx rgba(255, 107, 0, 0.3),
                0 2rpx 8rpx rgba(0, 0, 0, 0.1),
                inset 0 2rpx 4rpx rgba(255, 255, 255, 0.9);
  }
  50% {
    box-shadow: 0 8rpx 28rpx rgba(255, 107, 0, 0.45),
                0 4rpx 12rpx rgba(0, 0, 0, 0.15),
                inset 0 2rpx 4rpx rgba(255, 255, 255, 0.9),
                0 0 0 8rpx rgba(255, 107, 0, 0.1);
  }
}

/* 刻度标记 */
.slider-marks {
  position: absolute;
  bottom: 0;
  left: 30rpx;
  right: 30rpx;
  display: flex;
  justify-content: space-between;
}

.mark {
  font-size: 22rpx;
  color: #9CA3AF;
}

.form-item {
  margin-bottom: 24rpx;
}

.form-label {
  display: block;
  font-size: 26rpx;
  color: #6B7280;
  margin-bottom: 12rpx;
  font-weight: 500;
}

/* 输入框 - 玻璃效果 */
.form-input-wrapper {
  display: flex;
  align-items: center;
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(20rpx);
  border: 2rpx solid rgba(229, 231, 235, 0.8);
  border-radius: 20rpx;
  padding: 0 24rpx;
  height: 88rpx;
  transition: all 0.3s ease;
  box-shadow:
    0 4rpx 12rpx rgba(0, 0, 0, 0.04),
    inset 0 1rpx 0 rgba(255, 255, 255, 0.9);
}

.form-input-wrapper:focus-within {
  border-color: #FF6B35;
  background: rgba(255, 255, 255, 0.95);
  box-shadow:
    0 0 0 4rpx rgba(255, 107, 53, 0.15),
    0 8rpx 24rpx rgba(255, 107, 53, 0.12);
}

.form-input {
  flex: 1;
  font-size: 32rpx;
  font-weight: 600;
  color: #1F2937;
}

.form-unit {
  font-size: 28rpx;
  color: #9CA3AF;
  margin-left: 8rpx;
}

/* 快捷克数选择 */
.quick-grams {
  margin-bottom: 24rpx;
}

.quick-grams-label {
  font-size: 24rpx;
  color: #9CA3AF;
  margin-bottom: 12rpx;
}

.quick-grams-btns {
  display: flex;
  flex-wrap: wrap;
  gap: 16rpx;
}

/* 快捷按钮 - 玻璃液态 + 横扫灯光 */
.quick-gram-btn {
  position: relative;
  padding: 16rpx 28rpx;
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(20rpx);
  -webkit-backdrop-filter: blur(20rpx);
  border-radius: 20rpx;
  font-size: 26rpx;
  color: #6B7280;
  font-weight: 600;
  transition: all 0.3s ease;
  border: 2rpx solid rgba(229, 231, 235, 0.6);
  box-shadow:
    0 4rpx 12rpx rgba(0, 0, 0, 0.04),
    inset 0 1rpx 0 rgba(255, 255, 255, 0.9);
  overflow: hidden;
}

/* 快捷按钮横扫灯光 */
.quick-gram-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 107, 53, 0.15) 40%,
    rgba(255, 255, 255, 0.6) 50%,
    rgba(255, 107, 53, 0.15) 60%,
    transparent 100%
  );
  transition: left 0.5s ease;
}

.quick-gram-btn:active {
  transform: scale(0.95);
  color: #FF6B35;
  border-color: rgba(255, 107, 53, 0.4);
  background: linear-gradient(135deg, rgba(255, 247, 237, 0.95) 0%, rgba(255, 237, 213, 0.95) 100%);
  box-shadow:
    0 4rpx 16rpx rgba(255, 107, 53, 0.15),
    inset 0 1rpx 0 rgba(255, 255, 255, 0.9);
}

.quick-gram-btn:active::before {
  left: 100%;
}

/* 热量预览 - 玻璃效果 */
.calories-preview {
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(20rpx);
  -webkit-backdrop-filter: blur(20rpx);
  border-radius: 24rpx;
  padding: 20rpx 24rpx;
  border: 1rpx solid rgba(229, 231, 235, 0.6);
  box-shadow:
    0 4rpx 16rpx rgba(0, 0, 0, 0.04),
    inset 0 1rpx 0 rgba(255, 255, 255, 0.9);
}

.preview-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12rpx 0;
}

.preview-row:not(:last-child) {
  border-bottom: 1rpx solid rgba(229, 231, 235, 0.5);
}

.preview-label {
  font-size: 26rpx;
  color: #6B7280;
}

.preview-value {
  font-size: 28rpx;
  font-weight: 300;
  color: #2c3e50;
  font-family: 'SF Mono', 'Menlo', monospace;
}

.preview-value.protein {
  color: #66BB6A;
}

.preview-value.carbs {
  color: #FDD835;
}

.preview-value.fat {
  color: #42A5F5;
}

/* 操作按钮区域 */
.food-edit-actions {
  display: flex;
  gap: 20rpx;
  margin-top: 24rpx;
}

/* 取消按钮 - 玻璃效果 + 横扫灯光 */
.edit-btn-cancel {
  position: relative;
  flex: 1;
  height: 96rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(243, 244, 246, 0.85);
  backdrop-filter: blur(20rpx);
  -webkit-backdrop-filter: blur(20rpx);
  border-radius: 24rpx;
  font-size: 30rpx;
  color: #6B7280;
  font-weight: 600;
  transition: all 0.3s ease;
  border: 2rpx solid rgba(229, 231, 235, 0.6);
  box-shadow:
    0 4rpx 12rpx rgba(0, 0, 0, 0.04),
    inset 0 1rpx 0 rgba(255, 255, 255, 0.9);
  overflow: hidden;
}

/* 取消按钮横扫灯光 */
.edit-btn-cancel::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(156, 163, 175, 0.2) 40%,
    rgba(255, 255, 255, 0.6) 50%,
    rgba(156, 163, 175, 0.2) 60%,
    transparent 100%
  );
  transition: left 0.5s ease;
}

.edit-btn-cancel:active {
  transform: scale(0.98);
  background: rgba(229, 231, 235, 0.9);
}

.edit-btn-cancel:active::before {
  left: 100%;
}

/* 保存按钮 - 主色调 + 持续横扫灯光 */
.edit-btn-save {
  position: relative;
  flex: 2;
  height: 96rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #FF6B35 0%, #FF8E53 100%);
  border-radius: 24rpx;
  font-size: 30rpx;
  color: #FFFFFF;
  font-weight: 700;
  box-shadow:
    0 8rpx 24rpx rgba(255, 107, 53, 0.35),
    inset 0 1rpx 0 rgba(255, 255, 255, 0.3);
  transition: all 0.3s ease;
  overflow: hidden;
}

/* 保存按钮持续横扫灯光 */
.edit-btn-save::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 80%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.1) 30%,
    rgba(255, 255, 255, 0.5) 50%,
    rgba(255, 255, 255, 0.1) 70%,
    transparent 100%
  );
  animation: btn-shine-sweep 2.5s ease-in-out infinite;
}

@keyframes btn-shine-sweep {
  0% {
    left: -100%;
  }
  50%, 100% {
    left: 150%;
  }
}

.edit-btn-save:active {
  transform: scale(0.98);
  box-shadow:
    0 4rpx 16rpx rgba(255, 107, 53, 0.25),
    inset 0 1rpx 0 rgba(255, 255, 255, 0.3);
}


/* ============ 相机玻璃按钮 (Mint Ice Crystal Button) ============ */
/* === 1. 薄荷冰晶底座 (Mint Ice Base) === */
.camera-glass-btn {
  position: fixed;
  bottom: calc(120rpx + env(safe-area-inset-bottom));
  left: 50%;
  transform: translateX(-50%);
  z-index: 100;
  
  width: 120rpx;  /* 保持放大后的尺寸 */
  height: 120rpx;
  border-radius: 50%;
  
  /* 调整底座以适配深色图标：更浅更亮，形成"白纸黑字"般的清晰感 */
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(167, 243, 208, 0.6) 100%);
  
  /* 强磨砂 */
  backdrop-filter: blur(16rpx);
  -webkit-backdrop-filter: blur(16rpx);
  
  /* 边缘高光：更亮的白色 */
  border: 2rpx solid rgba(255, 255, 255, 0.9);
  
  /* 复合光影：增加一点绿色光晕，呼应主题 */
  box-shadow: 
    0 8rpx 20rpx rgba(16, 185, 129, 0.15),
    inset 0 0 12rpx rgba(255, 255, 255, 0.5);
  
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  
  /* 保持呼吸动画 */
  animation: camera-breathe 3s ease-in-out infinite;
}

/* 点击反馈 */
.camera-glass-btn:active {
  transform: translateX(-50%) scale(0.92);
  /* 按压时颜色加深一点，反馈更明显 */
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.7) 0%, rgba(52, 211, 153, 0.5) 100%);
  animation: none; /* 点击时暂停动画 */
}

/* === 2. 银色相机主体 (Silver Body) === */
.crystal-camera-body {
  width: 65rpx;  /* 按比例放大以适配120rpx按钮 */
  height: 48rpx;  /* 按比例放大 */
  border-radius: 6rpx;
  position: relative;
  
  /* 核心修改：颜色变浅，改为冷银灰 */
  border: 4rpx solid #64748B; 
  
  /* 填充：保持通透 */
  background: rgba(255, 255, 255, 0.5);
  
  /* 关键：利用投影模拟金属厚度感 (底部深影 + 顶部高光) */
  box-shadow: 
    0 4rpx 8rpx rgba(100, 116, 139, 0.2), /* 银色投影 */
    inset 0 1rpx 0 rgba(255, 255, 255, 0.8); /* 顶部金属高光 */
}

/* 顶部快门 */
.crystal-camera-body::before {
  content: '';
  position: absolute;
  top: -8rpx;
  left: 6rpx;
  width: 22rpx;  /* 按比例调整 */
  height: 8rpx;  /* 按比例调整 */
  /* 银色实心 */
  background: #64748B;
  border-radius: 4rpx 4rpx 0 0;
}

/* === 3. 银色镜头 (Silver Lens) === */
.crystal-camera-lens {
  width: 26rpx;  /* 按比例放大 */
  height: 26rpx;  /* 按比例放大 */
  border-radius: 50%;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  
  /* 镜头圈：银色描边 */
  border: 3rpx solid #64748B;
  
  /* 镜头反光：冷白渐变 */
  background: radial-gradient(circle at 30% 30%, #FFFFFF 0%, #E2E8F0 100%);
}

/* === 4. 闪光点 (The Flash) === */
.crystal-camera-flash {
  width: 8rpx;  /* 按比例放大 */
  height: 8rpx;  /* 按比例放大 */
  /* 保持亮色，形成反差 */
  background: #38BDF8; /* Sky-400 */
  border-radius: 50%;
  position: absolute;
  top: 8rpx;  /* 按比例调整 */
  right: 8rpx;  /* 按比例调整 */
  box-shadow: 0 0 6rpx rgba(56, 189, 248, 0.6);
}

/* === 5. 动画关键帧适配 === */
@keyframes camera-breathe {
  0%, 100% {
    transform: translateX(-50%) translateY(0) scale(1);
    box-shadow: 
      0 8rpx 20rpx rgba(16, 185, 129, 0.15), 
      inset 0 0 12rpx rgba(255, 255, 255, 0.5);
  }
  50% {
    transform: translateX(-50%) translateY(-6rpx) scale(1.05);
    box-shadow: 
      0 16rpx 30rpx rgba(16, 185, 129, 0.1), 
      inset 0 0 12rpx rgba(255, 255, 255, 0.5);
  }
}

/* ============ 全局字体颜色修正 - 日光未来主义风格 ============ */
/* 全局文字颜色统一为 Slate-700 */
text, view {
  color: #334155; /* Slate-700 替换原有的 #2c3e50 */
}

/* 次要文字颜色统一为 Slate-500，加深一级以提升可读性 */
.meal-time, .food-portion, .cal-unit, .donut-unit, .donut-label {
  color: #64748B !important; /* Slate-500，加深一级 */
  font-weight: 400; /* 避免使用极细体 */
}
