# âœ… Hooks å’Œ Skills é…ç½®å®Œæˆ

## ğŸ‰ é…ç½®çŠ¶æ€

### âœ… å·²å®Œæˆ

1. **Git ä»“åº“åˆå§‹åŒ–**
   - âœ… Git ä»“åº“å·²åˆå§‹åŒ–
   - âœ… Git Hook å·²å®‰è£…å¹¶æµ‹è¯•é€šè¿‡

2. **Git Hookï¼ˆè‡ªåŠ¨è¿½è¸ªï¼‰**
   - âœ… å·²å®‰è£… pre-commit hook
   - âœ… æ¯æ¬¡ `git commit` æ—¶è‡ªåŠ¨è¿½è¸ªå˜æ›´çš„æ–‡ä»¶
   - âœ… æµ‹è¯•é€šè¿‡ï¼šæäº¤æ—¶æ˜¾ç¤º "ğŸ“ è¿½è¸ªå˜æ›´: xxx"

3. **æ–‡ä»¶ç›‘å¬å·¥å…·**
   - âœ… fswatch å·²å®‰è£…ï¼ˆmacOSï¼‰
   - âœ… ç›‘å¬è„šæœ¬å·²é…ç½®
   - âœ… å¯ä»¥è¿è¡Œ `npm run track:watch` å¯åŠ¨å®æ—¶ç›‘å¬

4. **æ‰‹åŠ¨è°ƒç”¨å‘½ä»¤**
   - âœ… `npm run skill` - æŠ€èƒ½æç¤º
   - âœ… `npm run track` - æ‰‹åŠ¨è¿½è¸ªæ–‡ä»¶

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. Git Hookï¼ˆæ¨èï¼Œæœ€è‡ªåŠ¨åŒ–ï¼‰

**å·²è‡ªåŠ¨é…ç½®**ï¼Œæ— éœ€é¢å¤–æ“ä½œï¼

æ¯æ¬¡æ‰§è¡Œ `git commit` æ—¶ä¼šè‡ªåŠ¨è¿½è¸ªæ‰€æœ‰æš‚å­˜çš„æ–‡ä»¶ï¼š

```bash
git add miniprogram/pages/diet/index.js
git commit -m "feat: update diet page"
# âœ… è‡ªåŠ¨è¿½è¸ª miniprogram/pages/diet/index.js
```

**è¿½è¸ªæ—¥å¿—ä½ç½®**ï¼š`.claude/tsc-cache/git-<timestamp>/`

### 2. æ–‡ä»¶ç›‘å¬ï¼ˆå®æ—¶è¿½è¸ªï¼‰

åœ¨ Cursor ç»ˆç«¯è¿è¡Œï¼š

```bash
npm run track:watch
```

ä¹‹åç¼–è¾‘ `miniprogram/` æˆ– `cloudfunctions/` ç›®å½•ä¸‹çš„æ–‡ä»¶æ—¶ä¼šè‡ªåŠ¨è¿½è¸ªã€‚

**åœæ­¢ç›‘å¬**ï¼šæŒ‰ `Ctrl+C`

### 3. æ‰‹åŠ¨è°ƒç”¨

**æŠ€èƒ½æç¤º**ï¼š
```bash
echo '{"prompt":"create miniprogram page"}' | npm run skill
```

**æ‰‹åŠ¨è¿½è¸ª**ï¼š
```bash
cat <<EOF | npm run track
{"tool_name":"Edit","tool_input":{"file_path":"/å®Œæ•´è·¯å¾„/to/file.js"},"session_id":"my-session"}
EOF
```

## ğŸ“Š è‡ªåŠ¨åŒ–ç¨‹åº¦å¯¹æ¯”

| æ–¹æ¡ˆ | è‡ªåŠ¨åŒ–ç¨‹åº¦ | è§¦å‘æ—¶æœº | æ¨èåº¦ |
|------|-----------|---------|--------|
| **Git Hook** | â­â­â­â­â­ | git commit æ—¶ | â­â­â­â­â­ |
| **æ–‡ä»¶ç›‘å¬** | â­â­â­â­ | æ–‡ä»¶ä¿å­˜æ—¶ | â­â­â­â­ |
| **æ‰‹åŠ¨è°ƒç”¨** | â­â­ | æŒ‰éœ€è°ƒç”¨ | â­â­â­ |

## ğŸ“ è¿½è¸ªæ—¥å¿—ä½ç½®

æ‰€æœ‰è¿½è¸ªæ—¥å¿—ä¿å­˜åœ¨ï¼š`.claude/tsc-cache/<session-id>/`

- `edited-files.log` - è®°å½•æ‰€æœ‰è¢«ç¼–è¾‘çš„æ–‡ä»¶
- `affected-repos.txt` - è®°å½•å—å½±å“çš„æ¨¡å—
- `commands.txt` - è®°å½•æ„å»ºå‘½ä»¤ï¼ˆå¦‚æœæœ‰ï¼‰

## ğŸ”§ ç»´æŠ¤

### é‡æ–°å®‰è£… Git Hook

å¦‚æœ Git Hook ä¸¢å¤±æˆ–éœ€è¦æ›´æ–°ï¼š

```bash
npm run track:setup-git
```

### æ£€æŸ¥ Git Hook çŠ¶æ€

```bash
ls -la .git/hooks/pre-commit
```

### ç¦ç”¨ Git Hookï¼ˆä¸´æ—¶ï¼‰

```bash
chmod -x .git/hooks/pre-commit
```

### é‡æ–°å¯ç”¨ Git Hook

```bash
chmod +x .git/hooks/pre-commit
```

## âœ¨ ä¸‹ä¸€æ­¥

ç°åœ¨ä½ å¯ä»¥ï¼š

1. **æ­£å¸¸å¼€å‘**ï¼šæ¯æ¬¡ `git commit` æ—¶ä¼šè‡ªåŠ¨è¿½è¸ªå˜æ›´
2. **å¯åŠ¨ç›‘å¬**ï¼šè¿è¡Œ `npm run track:watch` è¿›è¡Œå®æ—¶è¿½è¸ª
3. **æŸ¥çœ‹æ—¥å¿—**ï¼šæ£€æŸ¥ `.claude/tsc-cache/` ç›®å½•ä¸‹çš„è¿½è¸ªè®°å½•

---

**é…ç½®å®Œæˆæ—¶é—´**ï¼š2025-12-12  
**é…ç½®ç‰ˆæœ¬**ï¼šv1.0

